
<!-- saved from url=(0082)http://kamranahmed.info/blog/2015/12/03/creating-a-modular-application-in-laravel/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <title>
        
            Creating a Modular Application in Laravel 5.1 · @kamranahmedse
        
    </title>

    <link rel="stylesheet" href="./Creating a Modular Application in Laravel 5.1 · @kamranahmedse_files/style.css">
    <link href="./Creating a Modular Application in Laravel 5.1 · @kamranahmedse_files/css" rel="stylesheet">

    <!--
        Body font
        Looks nice: font-size: 20px; line-height: 1.6
    -->
    <!--<link href="https://fonts.googleapis.com/css?family=Arimo" rel="stylesheet">-->


    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="@kamranahmedse" href="http://kamranahmed.info/atom.xml">
<script async="" src="./Creating a Modular Application in Laravel 5.1 · @kamranahmedse_files/analytics.js"></script><script type="text/javascript" async="" src="./Creating a Modular Application in Laravel 5.1 · @kamranahmedse_files/embed.js"></script><script type="text/javascript" async="" src="./Creating a Modular Application in Laravel 5.1 · @kamranahmedse_files/embed.js"></script><link rel="preload" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.1338080c7d626298e3eb715cb658042e.css"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.94805df7d922d8c7efc1170776463a6c.js"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.9c5e9911b88094ee43deca4e32c55daf.js"><link rel="preload" as="script" href="https://disqus.com/next/config.js"><link rel="preload" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.1338080c7d626298e3eb715cb658042e.css"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.94805df7d922d8c7efc1170776463a6c.js"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.9c5e9911b88094ee43deca4e32c55daf.js"><link rel="preload" as="script" href="https://disqus.com/next/config.js"></head>


<body>


<div class="article-page-nav">
    <h3 class="left">
        <a href="http://kamranahmed.info/" class="post-nav-btn">← Home</a>
    </h3>
    <div class="right">
        <div class="post-navigation">
            <!--<a target="_blank" class="post-nav-btn" href="http://github.com/kamranahmedse">Github</a>-->
            <!--<a target="_blank" class="post-nav-btn" href="http://github.com/kamranahmedse">Twitter</a>-->
        </div>
    </div>
    <div class="clr"></div>
</div>


<!-- .page-wrap -->
<div class="page-wrap">
    <!-- .page-content -->
    <div class="page-content">

        <!-- .articles-area -->
        <div class="articles-area">
            <div class="post-item">

    <h1>Creating a Modular Application in Laravel 5.1</h1>

    <div class="post-meta">
        Posted by <strong>Kamran Ahmed</strong> on <strong>03 December 2015</strong>
    </div>

    



    <div class="post-body">
        <p>Instead of having a giant mammoth of code, having your application divided into small meaningful modules can make the development of a giant site more manageable and enjoyable.</p>

<p>I have just started working upon a new project in Laravel 5.1 that is going to be huge in terms of functionality. Considering the scale of application, the different modules that it was going to have, instead of jumbling every thing up (controllers, models and views etc) in the existing directories that Laravel provides, I decided to implement modules such that each of the modules will have everything, (it’s controllers, models, views, middlewares, any helpers etc) separated. Now there might be several ways to approach this, but here is how I structured it.</p>

<pre><code class="php hljs">
config\
    module.php
    ...
    ...
app\
    ...
    ...
    Modules\
        ModuleOne\
            Controllers\
            Models\
            Views\
            routes.php
        ModuleTwo\
            Controllers\
            Models\
            Views\
            routes.php
        ModulesServiceProvider.php
    ...
</code></pre>

<p>You can follow the steps stated below to achieve a similar structure:</p>

<h2 id="setting-up-the-structure">Setting up the Structure</h2>

<p>Create a file called <code class="highlighter-rouge">module.php</code> inside the <code class="highlighter-rouge">config</code> directory. This file is going to hold the module names that we want to load and other configuration related to the modules. For now, lets keep it simple and just have the module names that we want to load. The file might look like below. (Note that the <code class="highlighter-rouge">User</code>, <code class="highlighter-rouge">Employee</code> are the module names that we want to load. And for every new module that you would want to create, you will have to add the name for it in this <code class="highlighter-rouge">modules</code> array.)</p>

<pre><code class="php hljs"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-comment"># config/module.php</span>

<span class="hljs-keyword">return</span>  [
    <span class="hljs-string">'modules'</span> =&gt; [
       <span class="hljs-string">'User'</span>,
       <span class="hljs-string">'Employee'</span>,
    ]
]
</code></pre>

<p>Create a directory called <code class="highlighter-rouge">Modules</code> inside the <code class="highlighter-rouge">app</code> directory. This directory is going to have a separate folder for each of the modules. For example, there can be a folder called <code class="highlighter-rouge">User</code>, one called <code class="highlighter-rouge">Employee</code> so on and so forth.</p>

<p>Let’s say that we want to create an <code class="highlighter-rouge">Employee</code> module. In that case, create an <code class="highlighter-rouge">Employee</code> directory at <code class="highlighter-rouge">app\Modules\</code>. And in this new directory create three directories namely <code class="highlighter-rouge">Controllers</code>, <code class="highlighter-rouge">Models</code> and <code class="highlighter-rouge">Views</code> and a file called <code class="highlighter-rouge">routes.php</code>. There is nothing special with the module, I mean the <code class="highlighter-rouge">routes.php</code> file is going to be used exactly how we use the outer <code class="highlighter-rouge">routes.php</code> file, controllers and models will be same as well. The only thing that you will have to take care about is the namespacing. You will have to make sure that you give proper namespaces to each controller/model that you create. In this case, the controllers will be having the namespace of <code class="highlighter-rouge">App\Modules\Employee\Controllers</code> and for any model, it would be <code class="highlighter-rouge">App\Modules\Employee\Models</code>. The final directory structure may look like the following:</p>

<pre><code class="bash hljs">
app\
    Modules\
        Employee\
            Controllers\
            Models\
            Views\
            routes.php
        User\
            Controllers\
            Models\
            Views\
            routes.php
</code></pre>

<p>Please note that you are not bound to have only the above stated directory structure, you are free to structure it however you want (but you have to make sure that you use proper namespacing). Without any doubt, you can add anything related to your module here as well for example form requests, helpers etc.</p>

<h2 id="creating-the-service-provider">Creating the Service Provider</h2>

<p>Now again, head to the <code class="highlighter-rouge">Modules</code> directory and add a file called <code class="highlighter-rouge">ModulesServiceProvider</code>. What we are going to do is make this Service provider inform Laravel that we are going to use these modules and you have to load each of the module’s <code class="highlighter-rouge">routes</code> and <code class="highlighter-rouge">views</code> from these modules as well. So that when a <code class="highlighter-rouge">route</code> or <code class="highlighter-rouge">view</code> will be looked up, Laravel will look into these folders as well. Below is how the service provider might look like:</p>

<pre><code class="php hljs">
<span class="hljs-preprocessor">&lt;?php</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Modules</span>;
 
<span class="hljs-comment">/**
* ServiceProvider
*
* The service provider for the modules. After being registered
* it will make sure that each of the modules are properly loaded
* i.e. with their routes, views etc.
*
*<span class="hljs-phpdoc"> @author</span> Kamran Ahmed &lt;kamranahmed.se@gmail.com&gt;
*<span class="hljs-phpdoc"> @package</span> App\Modules
*/</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ModulesServiceProvider</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">ServiceProvider</span>
</span>{
    <span class="hljs-comment">/**
     * Will make sure that the required modules have been fully loaded
     *<span class="hljs-phpdoc"> @return</span> void
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">boot</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-comment">// For each of the registered modules, include their routes and Views</span>
        <span class="hljs-variable">$modules</span> = config(<span class="hljs-string">"module.modules"</span>);

        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">list</span>(,<span class="hljs-variable">$module</span>) = each(<span class="hljs-variable">$modules</span>)) {

            <span class="hljs-comment">// Load the routes for each of the modules</span>
            <span class="hljs-keyword">if</span>(file_exists(<span class="hljs-keyword">__DIR__</span>.<span class="hljs-string">'/'</span>.<span class="hljs-variable">$module</span>.<span class="hljs-string">'/routes.php'</span>)) {
                <span class="hljs-keyword">include</span> <span class="hljs-keyword">__DIR__</span>.<span class="hljs-string">'/'</span>.<span class="hljs-variable">$module</span>.<span class="hljs-string">'/routes.php'</span>;
            }

            <span class="hljs-comment">// Load the views</span>
            <span class="hljs-keyword">if</span>(is_dir(<span class="hljs-keyword">__DIR__</span>.<span class="hljs-string">'/'</span>.<span class="hljs-variable">$module</span>.<span class="hljs-string">'/Views'</span>)) {
                <span class="hljs-variable">$this</span>-&gt;loadViewsFrom(<span class="hljs-keyword">__DIR__</span>.<span class="hljs-string">'/'</span>.<span class="hljs-variable">$module</span>.<span class="hljs-string">'/Views'</span>, <span class="hljs-variable">$module</span>);
            }
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">register</span><span class="hljs-params">()</span> </span>{}

}
</code></pre>

<p>Now the next thing is registering this service provider with the Laravel. And for that, open up the file <code class="highlighter-rouge">config/app.php</code> and add ‘App\Modules\ModulesServiceProvider’ to the end of the providers array.</p>

<pre><code class="php hljs">
<span class="hljs-comment">#config/app.php</span>

<span class="hljs-string">'providers'</span> =&gt; [
    ...
    ...
    App\Modules\ModulesServiceProvider::<span class="hljs-class"><span class="hljs-keyword">class</span>,
]
</span></code></pre>

<h2 id="adding-modules">Adding Modules</h2>

<p>Everything is setup now. In order to add a new module, all you have to do is create a folder for the module inside the <code class="highlighter-rouge">App\Modules\</code> directory, place your controllers, models, views and routes in this directory, register this module name in the <code class="highlighter-rouge">config\module.php</code> and your module has been registered with Laravel. Using the controllers and models is the same that is how you use any outer controller or model i.e. by specifying the correct namespace. But for loading views, what you have to do is call a view like: <code class="highlighter-rouge">ModuleName::viewname</code> e.g.</p>

<pre><code class="php hljs">
<span class="hljs-keyword">return</span> view(<span class="hljs-string">'Employee::dummy'</span>);
</code></pre>

<p>And that sums it up. Do you have any techniques of your own? How do you structure your modules in Laravel? Do not forget to share it with everyone in the comments section below.</p>

<p><strong>Note:</strong> Please note that, during the process, if you come across any <strong>Class not found</strong> exceptions and you haven’t done anything wrong, just run <code class="highlighter-rouge">composer dump-autoload</code>.</p>

<p>Source code can be found through this <a href="https://github.com/kamranahmedse/laravel-modular-boilerplate">Github repository</a></p>


        


        <blockquote class="high-note" style="margin-bottom: -30px;">
    <p>
        Liked it? Follow me on twitter<a target="_blank" href="https://twitter.com/kamranahmedse">@kamranahmedse</a>and<a target="_blank" href="https://twitter.com/intent/tweet?url=http://kamranahmed.info/blog/2015/12/03/creating-a-modular-application-in-laravel/&amp;text=Creating%20a%20Modular%20Application%20in%20Laravel%205.1%20by%20@kamranahmedse">tweet about it</a>
    </p>
</blockquote>

<!--<div class="page-nav">-->
<!---->
<!--<a class="left" href="/blog/2016/01/21/let-the-comments-drive-your-code/">&larr;Let the comments drive your code</a>-->
<!---->
<!---->
<!--<a class="right" href="/blog/2015/11/29/laravel-5.1-progress-bar-in-commands/">Laravel 5.1 - Showing progress bars in commands &rarr;</a>-->
<!---->

<!--<div class="clr"></div>-->
<!--</div>-->

        <div id="mc_embed_signup">
    <h3>Subscribe yourself</h3>
    <p>You can subscribe to my blog posts by providing your email below. Your email will be kept safe and there will be
        no spamming ..Promise!</p>

    <form action="http://kamranahmed.us9.list-manage.com/subscribe/post?u=6f57b741a6a939744f1f203a0&amp;id=fcfe3e1a27" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
        <div id="mc_embed_signup_scroll">
            <input type="email" value="" name="EMAIL" placeholder="Email Address" class="required email" id="mce-EMAIL" required="">

            <div class="response" id="mce-error-response" style="display:none"></div>
            <div class="response" id="mce-success-response" style="display:none"></div>

            <div style="position: absolute; left: -5000px;"><input type="text" name="b_6f57b741a6a939744f1f203a0_fcfe3e1a27" tabindex="-1" value=""></div>
            <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div>
    </form>
</div>

    </div>
</div>


  <!-- Add Disqus comments. -->
  <div id="disqus_thread"><iframe id="dsq-app4" name="dsq-app4" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Creating a Modular Application in Laravel 5.1 · @kamranahmedse_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 8255px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe><iframe id="indicator-north" name="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 680px !important; border: none !important; overflow: hidden !important; top: 0px !important; min-width: 680px !important; max-width: 680px !important; position: fixed !important; z-index: 2147483646 !important; height: 18px !important; min-height: 18px !important; max-height: 18px !important; display: none !important;" src="./Creating a Modular Application in Laravel 5.1 · @kamranahmedse_files/saved_resource(2).html"></iframe><iframe id="indicator-south" name="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 680px !important; border: none !important; overflow: hidden !important; bottom: 0px !important; min-width: 680px !important; max-width: 680px !important; position: fixed !important; z-index: 2147483646 !important; height: 18px !important; min-height: 18px !important; max-height: 18px !important; display: none !important;" src="./Creating a Modular Application in Laravel 5.1 · @kamranahmedse_files/saved_resource(3).html"></iframe></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'kamranahmed'; // required: replace example with your forum shortname
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the &lt;a href="http://disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;</noscript>


        </div>
        <!-- /.articles-area -->

        
  <!-- Add Disqus comments. -->
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'kamranahmed'; // required: replace example with your forum shortname
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the &lt;a href="http://disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;</noscript>

    </div>
    <!-- /.page-content -->

    <div class="site-footer">
        <span class="muted">©
            <time datetime="2017-04-10T16:57:22+00:00">2017</time>. All rights reserved.</span>
        <p class="muted">If you've got any feedback, comments or just want to chat you can get in touch via <strong><a href="mailto:kamranahmed.se@gmail.com">email</a></strong> or on twitter <strong><a href="https://twitter.com/kamranahmedse" target="_blank">@kamranahmedse</a></strong>. Also, here are
            the links to my <strong><a href="http://github.com/kamranahmedse">github</a></strong> and <strong><a href="http://pk.linkedin.com/in/kaamranahmed">linkedin</a></strong> profiles.</p>
    </div>
</div>
<!-- /.page-wrap -->

<script type="text/javascript" src="./Creating a Modular Application in Laravel 5.1 · @kamranahmedse_files/highlight.pack.js"></script>
<script type="text/javascript">
    hljs.initHighlightingOnLoad();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-58155965-1', 'auto');
  ga('send', 'pageview');
</script>


<iframe style="display: none;" src="./Creating a Modular Application in Laravel 5.1 · @kamranahmedse_files/saved_resource(4).html"></iframe></body></html>