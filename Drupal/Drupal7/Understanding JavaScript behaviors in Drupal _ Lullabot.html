<!DOCTYPE html>
<!-- saved from url=(0078)https://www.lullabot.com/articles/understanding-javascript-behaviors-in-drupal -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Understanding JavaScript behaviors in Drupal | Lullabot</title> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta name="mobile-web-app-capable" content="yes"> <link rel="apple-touch-icon" href="https://www.lullabot.com/build/rev/images/apple-touch-icon.81cece44418f.png"> <link rel="icon" sizes="192x192" href="https://www.lullabot.com/build/rev/images/icon.743f0479dbc8.png"> <!-- Chrome, Firefox OS, Opera and Vivaldi --> <meta name="theme-color" content="#37A9EF"> <!-- Windows Phone --> <meta name="msapplication-navbutton-color" content="#37A9EF"> <!-- iOS Safari --> <meta name="apple-mobile-web-app-status-bar-style" content="#37A9EF">  <meta name="description" content="Make your JavaScript more efficient by mastering Drupal behaviors">  <!-- Twitter Card data --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="@lullabot"> <meta name="twitter:title" content="Understanding JavaScript behaviors in Drupal">  <meta name="twitter:description" content="Make your JavaScript more efficient by mastering Drupal behaviors">   <meta name="twitter:creator" content="@juampynr">   <!-- Twitter summary card with large image must be at least 280x150px --> <meta name="twitter:image:src" content="https://assets.lullabot.com/hero-article-fpo.png">  <!-- Open Graph data --> <meta property="og:title" content="Understanding JavaScript behaviors in Drupal">  <meta property="og:type" content="article">   <meta property="og:url" content="https://www.lullabot.com/articles/understanding-javascript-behaviors-in-drupal">   <meta property="og:image" content="https://assets.lullabot.com/hero-article-fpo.png">   <meta property="og:site_name" content="Lullabot - Strategy, Design, Development"> <meta property="fb:admins" content="10153678865684465,10150430633812261,10151971386069211,453915384967">  <meta property="article:published_time" content="2015-02-03T17:00:00.000Z">     <style>a:active,a:hover,input:focus,textarea:focus{outline:0}html{font-family:serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}article,aside,details,footer,header,main,menu,nav,section,summary{display:block}video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}template{display:none}a{background-color:transparent}abbr[title]{border-bottom:1px dotted}b{font-weight:700}img{border:0;max-width:100%}svg:not(:root){overflow:hidden}pre{overflow:auto}code,pre{font-size:1em}button,input{color:inherit;font:inherit;margin:0}.article-hero--background,.u-form-button{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}button{overflow:visible;text-transform:none;-webkit-appearance:button;cursor:pointer}.author__headline,.services-tiles,h3{text-transform:uppercase}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal;border-radius:0;-webkit-appearance:none}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}.l-container-nested:after,.l-container:after,.layout-case-study .layout-case-study__inner:after,.layout-service__content:after,.layout-service__inner:after,.layout-service__lead:after,.new-typography .rich-text:after{content:" ";display:block;clear:both}.l-debug-grid--active:after,.l-debug-grid--active:before{top:0;content:'';pointer-events:none;position:absolute;left:0}.l-debug-grid--active:after,.l-debug-grid--active:before{display:block;right:0;bottom:0;width:auto;height:auto}.l-debug-grid--active:after{background:url(/images/rhythm.png) top left;background-size:auto 28px}.l-debug-grid--active:active:after{display:none}.l-debug-grid--active:before{display:block;-ms-transform:translate(-14px,0);transform:translate(-14px,0);background-image:linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3));background-repeat:no-repeat;background-size:14px 100%,28px 100%,28px 100%,28px 100%,28px 100%,28px 100%,14px 100%;width:calc(100% + 28px);height:100%;background-position-x:14px,16.666666667%,33.333333333%,50%,66.666666667%,83.333333333%,calc(100% - 14px);-ms-transform-origin:left top;transform-origin:left top}body,html{background:#fff}@font-face{font-family:FreightTextPro;font-weight:300;font-style:normal;src:url(/fonts/FreightTextProBookLight.woff2) format("woff2"),url(/fonts/FreightTextProBookLight.woff) format("woff"),url(/fonts/FreightTextProBookLight.ttf) format("truetype")}@font-face{font-family:FreightTextPro;font-weight:300;font-style:italic;src:url(/fonts/FreightTextProLightItalic.woff2) format("woff2"),url(/fonts/FreightTextProLightItalic.woff) format("woff"),url(/fonts/FreightTextProLightItalic.ttf) format("truetype")}@font-face{font-family:FreightTextPro;font-weight:400;font-style:normal;src:url(/fonts/FreightTextProBook.woff2) format("woff2"),url(/fonts/FreightTextProBook.woff) format("woff"),url(/fonts/FreightTextProBook.ttf) format("truetype")}@font-face{font-family:FreightTextPro;font-weight:400;font-style:italic;src:url(/fonts/FreightTextProBookItalic.woff2) format("woff2"),url(/fonts/FreightTextProBookItalic.woff) format("woff"),url(/fonts/FreightTextProBookItalic.ttf) format("truetype")}@font-face{font-family:FreightTextPro;font-weight:700;font-style:normal;src:url(/fonts/FreightTextProBold.woff2) format("woff2"),url(/fonts/FreightTextProBold.woff) format("woff"),url(/fonts/FreightTextProBold.ttf) format("truetype")}@font-face{font-family:FreightSansPro;font-weight:400;font-style:normal;src:url(/fonts/FreightSansProBook.woff2) format("woff2"),url(/fonts/FreightSansProBook.woff) format("woff"),url(/fonts/FreightSansProBook.ttf) format("truetype")}@font-face{font-family:FreightSansPro;font-weight:700;font-style:normal;src:url(/fonts/FreightSansProBold.woff2) format("woff2"),url(/fonts/FreightSansProBold.woff) format("woff"),url(/fonts/FreightSansProBold.ttf) format("truetype")}html{font-size:100%;box-sizing:border-box}*,:after,:before{box-sizing:inherit}body{margin:0;font-family:Georgia,serif;color:#0b1b23}body.body--fonts-loaded{font-family:FreightTextPro,Georgia,serif}body.is-navigation-open{width:100%;height:100%;overflow:hidden}.body--fonts-loaded code,.body--fonts-loaded kbd,.body--fonts-loaded pre,.body--fonts-loaded samp,.body--fonts-loaded tt,.body--fonts-loaded var,code,pre,var{font-family:Consolas,monospace}p>code{word-break:break-word}body>svg{display:block}::-webkit-input-placeholder{color:rgba(0,0,0,.3)}:-ms-input-placeholder{color:rgba(0,0,0,.3)}::placeholder{color:rgba(0,0,0,.3)}.u-form-button{font-family:Helvetica,sans-serif;display:inline-block;transition:color .3s ease,background-color .3s ease;border:0;background-color:#2284c0;cursor:pointer;padding:0 1rem;height:2.8125rem;text-decoration:none;line-height:2.8125rem;color:#fff;font-size:1.125rem;font-weight:700}.body--fonts-loaded .u-form-button{font-family:FreightSansPro,Helvetica,sans-serif}.contact-form__submit:focus,.contact-form__submit:hover,.u-form-button:focus,.u-form-button:hover{outline:0;background-color:#e2311e;color:#fff}.contact-form__submit:focus .icon--arrow-right,.contact-form__submit:hover .icon--arrow-right,.u-form-button:focus .icon--arrow-right,.u-form-button:hover .icon--arrow-right{fill:currentColor}.u-form-button .icon--arrow-right{transition:fill .3s ease;padding-left:.5rem;width:1.5625rem;height:.75rem;vertical-align:middle;fill:currentColor}.contact-form input,.contact-form textarea,.u-form-text-input{border:1px solid #ced4d6;border-radius:0;padding:1.25rem 1.5rem;width:100%;font-weight:300}.contact-form input:focus,.contact-form textarea:focus,.u-form-text-input:focus{box-shadow:inset 3px 0 0 0 #37a9ef}.u-form-checkbox-button span:hover,.u-form-radio-button span:hover{background-color:#f2f2f2}.u-form-checkbox-button>input:checked+span,.u-form-radio-button>input:checked+span{background-color:#37a9ef;color:#fff}.navigation__search-input,.u-search-input{border:0;background:rgba(191,191,191,.2);padding-left:3.75rem;height:3.75rem;line-height:1.75;color:#6a7c8b;font-size:1.25rem;font-weight:300}h2,h3{line-height:1.25}h1,h2,h3,strong .link,strong a{font-weight:700}h1,h2,h3{font-family:Helvetica,sans-serif;margin:0;font-style:normal}.body--fonts-loaded h1,.body--fonts-loaded h2,.body--fonts-loaded h3,.body--fonts-loaded h4,.body--fonts-loaded h5,.body--fonts-loaded h6{font-family:FreightSansPro,Helvetica,sans-serif}h1{margin-bottom:1.5rem;line-height:1.125;font-size:1.75rem}h2{margin-bottom:.5rem;font-size:1.375rem}h3{margin-bottom:.75rem;font-size:1.125rem}body{line-height:1.75;font-size:1rem}.author__bio,.author__headline{line-height:1.5;font-size:1rem}.new-typography h1:last-child,.new-typography h2:last-child,.new-typography h3:last-child,.new-typography h4:last-child,.new-typography h5:last-child,.new-typography h6:last-child{margin-bottom:0}.new-typography img:before{display:block;content:'We\'re sorry, the image below is broken :('}.link,a{transition:color .3s ease,background-color .3s ease,border .3s ease;text-decoration:underline;color:#2284c0}.link--cta:hover,.link:hover,a:hover{color:#e2311e}.link .icon,a .icon{transition:fill .3s ease}.link--cta:hover .icon--arrow-down-cta,.link--cta:hover .icon--arrow-right{fill:currentColor}.link--cta-button:hover{background-color:#e2311e;color:#fff}.link--cta-button:hover .icon--arrow-right{fill:currentColor}.link--cta-button-alt:hover{border-color:currentColor;color:#e2311e}.link--with-border{position:relative;text-decoration:none}.link--with-border:after{display:inline-block;position:absolute;bottom:0;left:0;margin-bottom:2px;border-bottom:1px solid;width:100%;content:''}.layout-announcements__title__dashed:after,.layout-articles__title__dashed:after{display:block;bottom:.5625rem;z-index:1;width:100%;position:absolute;vertical-align:middle}.link--block-wrapper:hover{color:inherit}.cover-image--with-image{height:100vh}::-moz-selection{opacity:.8;background-color:#ced4d6}::selection{opacity:.8;background-color:#ced4d6}.layout-announcement--with-hero.layout-announcement--hero-inverted .cover-image--with-image.cover-image--with-gradient:after{background:linear-gradient(to top,rgba(255,255,255,.7),rgba(255,255,255,0))}.layout-announcements__title__dashed:after{background-color:#f7f7f7;height:.1875rem;content:' '}.layout-article-external__source:after{margin:0 .625rem;color:#2284c0;content:'//'}.layout-article__article{margin-bottom:4.0625rem;max-width:100%;overflow:hidden}.layout-article__article-content-lead p{margin-bottom:1.675rem;line-height:1.5;color:#185d87;font-size:1.25rem;font-weight:300}.layout-case-study-bravo__inner .link:hover,.layout-case-study-grammys__inner .link:hover,.layout-case-study-msnbc__inner .link:hover,.layout-case-study-namm__inner .link:hover,.layout-case-study-planit .link:hover{color:#e2311e}.layout-article__article-content h2{margin-top:2.5rem}.layout-article__article-topics{margin:2.3125rem 0 1.25rem}.layout-article__article-related li:after{display:block;background-image:url(/images/sprites/misc/quote-dot-pattern.svg);background-repeat:repeat-x;background-position:left bottom;height:.625rem;content:' '}.layout-article__article-related li:last-child:after{background-image:none}.layout-article__comments{margin-bottom:4rem}.layout-articles__announcements--inverted .cover-image--with-image.cover-image--with-gradient:after{background:linear-gradient(to top,rgba(255,255,255,.7),rgba(255,255,255,0))}.layout-articles__title__dashed:after{background-color:#f7f7f7;height:.1875rem;content:' '}.layout-case-study-bravo__phones:after,.layout-case-study-grammy__phones:after,.layout-case-study-grammy__stats:after{content:" ";clear:both;display:block}.layout-case-study-bravo__inner .case-study-header__title:after,.layout-case-study-bravo__inner .case-study-header__title:before{opacity:.4}.layout-case-study-grammy__stats-item-number:after{display:block;margin:0 auto 1rem;background-color:#fff;width:5.875rem;height:3px;content:''}.layout-case-study-msnbc__phones:after,.layout-case-study-namm__phones:after,.layout-case-study-planit__mockup:after,.layout-case-study-planit__phones:after,.layout-case-study-spredfast__desktops:after{content:" ";display:block;clear:both}.layout-case-study-msnbc__inner .case-study-header__title:after,.layout-case-study-msnbc__inner .case-study-header__title:before{opacity:.1}.layout-case-study-namm__inner .case-study-header__title:after,.layout-case-study-namm__inner .case-study-header__title:before{opacity:.4}.layout-case-study-planit .navigation .navigation__icon__line:after,.layout-case-study-planit .navigation .navigation__icon__line:before{background-color:#ff6e98}.layout-case-study-planit .case-study-header__title:after,.layout-case-study-planit .case-study-header__title:before{opacity:.8}.layout-case-study-spredfast__inner .case-study-header__title:after,.layout-case-study-spredfast__inner .case-study-header__title:before,.layout-case-study-syfy__inner .case-study-header__title:after,.layout-case-study-syfy__inner .case-study-header__title:before{opacity:.1}.layout-case-study-simple--martha-stewart-living .navigation__icon__line:after,.layout-case-study-simple--martha-stewart-living .navigation__icon__line:before{color:#5e7f2b}.layout-case-study-simple--wwe .navigation__icon__line:after,.layout-case-study-simple--wwe .navigation__icon__line:before{color:#ad8dcf}.layout-case-study-simple--mit .navigation__icon__line:after,.layout-case-study-simple--mit .navigation__icon__line:before{color:#fd9740}.layout-case-study-simple--tech-guy-labs .navigation__icon__line:after,.layout-case-study-simple--tech-guy-labs .navigation__icon__line:before{color:#93bccd}.layout-case-study-spredfast__inner .link:hover,.layout-case-study-syfy__inner .link:hover{color:#e2311e}.layout-case-study-spredfast__inner .navigation__icon__line:after,.layout-case-study-spredfast__inner .navigation__icon__line:before{background:currentColor}.layout-case-study-spredfast__stat__number:after{display:block;margin:0 auto;background:rgba(255,255,255,.2);width:5.9375rem;height:.3125rem;content:''}.layout-case-study-syfy__desktops:after,.layout-case-study-syfy__phones:after{content:" ";display:block;clear:both}.layout-case-study .layout-case-study__title:after,.layout-case-study .layout-case-study__title:before{background-color:#ced4d6;content:'';display:-ms-flexbox;display:flex;height:3px;margin:0 10px;opacity:.4;width:40px}.layout-homepage__testimonial__video.is-open .icon--contact-close:hover,.layout-who-we-are__hero__video .icon--contact-close:hover{opacity:.8}.layout-case-study .layout-case-study__content ul li:before{content:'\2022';color:#a3afb9;font-size:.8em;position:absolute;top:2px;left:0}.cover-image--with-image:after,.layout-announcement__body:after,.layout-announcements__top-inner:after,.layout-announcements__top:after,.layout-article__article-content:after,.layout-article__article-related:after,.layout-articles__top-inner:after,.layout-articles__top:after,.layout-case-study-spredfast__mockup:after,.layout-case-study-spredfast__mockup__content:after,.layout-case-study-spredfast__quote:after,.layout-case-study-spredfast__quote__content:after,.layout-case-study-spredfast__snippet-list:after,.layout-case-study-spredfast__stats:after,.layout-case-study-spredfast__styleguide:after,.layout-case-study-spredfast__text-break:after,.layout-case-study-spredfast__wireframes:after,.layout-clients .logo-tile-list:after,.layout-clients__contact:after,.layout-clients__inner:after,.layout-contact__methods:after,.layout-default__body:after,.layout-homepage__contact .layout-homepage__contact-form:after,.layout-homepage__item:after,.layout-homepage__testimonial:after,.layout-our-work .promo-client-list__work:after,.layout-our-work__case-studies:after,.layout-podcast-episode .rich-text:after,.layout-podcast-episode__authors:after,.layout-podcast-episode__comments:after,.layout-podcast-episode__guests:after,.layout-podcast-episode__header:after,.layout-podcast-episode__topics:after,.layout-podcast-episode__transcript:after,.layout-series__content:after,.layout-webvr-home__body:after,.layout-welcome__bricks:after,.layout-welcome__clients:after,.layout-welcome__contact:after,.layout-welcome__header:after,.layout-who-we-are__intro:after,.layout-who-we-are__services-tiles:after,.promo-client-list__work__inner:after,.promo-clutch:after,.promo-clutch__inner:after,.promo-contact-form:after,.promo-other-clients:after,.promo-podcast-breaker:after,.related-links:after,.teasers-paged__promo:after,.teasers-paged__teaser:after,.u-layout-container:after,.u-layout-full-width-copy-container:after,.u-layout-full:after,.u-layout-page:after{content:" ";display:block;clear:both}.layout-case-study .layout-case-study__content ul li:not(:last-child){margin-bottom:.875rem}.layout-case-study .layout-case-study__content .rich-text__content h2:first-child{margin-top:0}.layout-case-study .layout-case-study__content .rich-text__content h2:last-child{margin-bottom:0}.layout-default--with-hero.layout-default--hero-inverted .cover-image--with-image.cover-image--with-gradient:after{background:linear-gradient(to top,rgba(255,255,255,.7),rgba(255,255,255,0))}.u-layout-page{margin:0 auto;min-width:20rem;max-width:120rem}.cover-image--with-image{margin:0 auto}.layout-article__article-content,.related-links,.u-layout-full-width-copy-container{margin-right:auto;margin-left:auto;padding-right:2.625rem;padding-left:2.625rem;max-width:9999rem}.layout-article__inner{position:relative;z-index:5;background-color:#fff}.layout-homepage__services-tiles .services-tiles .link:focus,.layout-homepage__services-tiles .services-tiles .link:hover,.layout-homepage__services-tiles .services-tiles a:focus,.layout-homepage__services-tiles .services-tiles a:hover{color:#2284c0;background-color:transparent}.layout-homepage__services-tiles .services-tiles .link:focus .icon,.layout-homepage__services-tiles .services-tiles .link:hover .icon,.layout-homepage__services-tiles .services-tiles a:focus .icon,.layout-homepage__services-tiles .services-tiles a:hover .icon{fill:#37a9ef}.layout-homepage__testimonial__video-link:focus,.layout-homepage__testimonial__video-link:hover{color:#ffde8b}.layout-homepage__twitter__title a:focus,.layout-homepage__twitter__title a:hover{text-decoration:none;font-weight:700}.layout-podcast-episode__meta .link:hover{color:#ffe5b2}.layout-podcast-episode__meta-show:before{margin:0 .9375rem;color:rgba(255,255,255,.5);content:'//'}.layout-podcast-episode__social-links .link:hover{color:#ffde8b;fill:#ffde8b}.layout-podcast-episode__social-links .link:hover .icon{fill:#ffde8b}.layout-podcast-episode__transcript .podcast-episode__transcript:not(.is-open):after{content:'';position:absolute;bottom:0;left:0;width:100%;height:3.125rem;background-image:linear-gradient(to top,#fff,rgba(255,255,255,0))}.layout-podcast-episode__transcript .podcast-episode__transcript__button:hover{background-color:#e2311e}.layout-podcast-show__hero .link:hover{color:#ffe5b2}.layout-podcast-show__hero a.link:hover.icon{fill:currentColor}.layout-podcast-show__links__social .link:hover{color:#ffde8b}.layout-podcast-show__links__social .link:hover .icon{fill:#ffde8b}.layout-podcast-show__host-teasers:after{content:" ";display:block;clear:both}.layout-podcast-show__host-teasers .author__image:after{position:absolute;top:calc(50% - 5px);left:0;z-index:1;background:#f7f7f7;width:100%;height:.3125rem;content:' '}.layout-podcast-show__list-title:after{content:" ";display:block;clear:both}.layout-podcast-show__list-title__dashed:after{display:block;position:absolute;bottom:.6875rem;z-index:1;background-color:#f7f7f7;width:100%;height:.1875rem;vertical-align:middle;content:' '}.layout-podcast-show--drupal-voices .layout-podcast-show__hosts:after,.layout-podcast-show--drupal-voices .layout-podcast-show__hosts:before,.layout-podcast-show--drupalizeme-podcast .layout-podcast-show__hosts:after,.layout-podcast-show--drupalizeme-podcast .layout-podcast-show__hosts:before,.layout-podcast-show--hacking-culture .layout-podcast-show__hosts:after,.layout-podcast-show--hacking-culture .layout-podcast-show__hosts:before{background:#fff}.layout-podcasts-landing__retired>h3:after,.layout-podcasts-landing__retired>h3:before{vertical-align:middle;display:inline-block;width:40px;height:3px;margin:0 10px;content:'';background-color:#f2f2f2}.layout-podcasts-landing__retired>ul li:after{display:block;margin:.75rem auto;background:url(/images/sprites/misc/quote-dot-pattern.svg) repeat-x;background-size:9px;width:12rem;height:3px;content:''}.layout-podcasts-landing__retired>ul li:after:after{display:none}.layout-profile__location__header:after{content:" ";display:block;clear:both}.layout-profile__location__title__dashed:after{display:block;position:absolute;bottom:.5625rem;z-index:1;background-color:#f7f7f7;width:100%;height:.1875rem;vertical-align:middle;content:' '}.layout-search__footer:after{content:" ";display:block;clear:both}.layout-search__load-more:hover{background:#e2311e}.layout-topics__header:after,.layout-topics__title__dashed:after,.layout-upcoming-talks__title__dashed:after{background-color:#f7f7f7;content:' '}.layout-series__series-related li:after{display:block;background-image:url(/images/sprites/misc/quote-dot-pattern.svg);background-repeat:repeat-x;background-position:left bottom;height:.625rem;content:' '}.layout-series__series-related li:last-child:after{background-image:none}.layout-series__article-authors .author:last-child{margin-bottom:1.5625rem}.layout-topics__header:after{display:block;position:absolute;bottom:0;z-index:1;width:100%;height:.1875rem;vertical-align:middle}.layout-topics__title__dashed:after{display:block;position:absolute;bottom:3.75rem;z-index:1;width:100%;height:.1875rem;vertical-align:middle}.layout-upcoming-talks__title__dashed:after,.layout-webvr-home__title__dashed:after{bottom:.625rem;z-index:1;height:.1875rem;display:block;width:100%;position:absolute;vertical-align:middle}.layout-upcoming-talks__teaser:last-child{border-bottom:0}.layout-upcoming-talks__meta-divider:after{margin:0 .9375rem;color:#cdebf9;content:'//'}.layout-webvr-home--with-hero.layout-webvr-home--hero-inverted .cover-image--with-image.cover-image--with-gradient:after{background:linear-gradient(to top,rgba(255,255,255,.7),rgba(255,255,255,0))}.layout-webvr-home__title__dashed:after{background-color:#f7f7f7;content:' '}.layout-welcome__brick p:first-child{padding-top:1.0625rem}.layout-welcome__brick p:last-child{padding-bottom:1.1875rem}.layout-what-we-do__section__aside:last-child,.layout-what-we-do__section__main:last-child{margin-right:0}.layout-what-we-do__snippet:after{content:" ";display:block;clear:both}.layout-who-we-are__hero a:hover{color:#ffe5b2}.layout-who-we-are__hero__content:after{position:absolute;top:0;left:0;background:rgba(34,132,192,.7);width:100%;height:100%;content:''}.layout-who-we-are__stats__item:last-child{margin:0;padding:0}.layout-who-we-are__stats__item:last-child:after{display:none}.layout-who-we-are__staff__member .layout-who-we-are__staff__member-hover:hover{opacity:1}.layout-who-we-are__staff__member .layout-who-we-are__staff__member-hover__location:hover{color:#fff}.layout-who-we-are__staff__member--cta:hover{background:#e2311e}.layout-who-we-are__staff__member--cta a:hover{color:#ffde8b}.layout-who-we-are__map:after{display:block;position:absolute;bottom:0;left:0;background:linear-gradient(to top,#fff,rgba(255,255,255,0));width:100%;height:12%}.layout-who-we-are__distributed__benefits:after{content:" ";display:block;clear:both}.layout-who-we-are__distributed__benefit:last-child{min-height:0}.audio__seek-slider::-webkit-slider-thumb{-webkit-appearance:none;margin-top:-8px;background-color:#fff;height:16px;width:16px;border-radius:50%;cursor:pointer;box-shadow:-2px -1px 20px -5px #000}.audio__seek-slider::-moz-range-thumb{background-color:#fff;height:16px;width:16px;border-radius:50%;cursor:pointer;box-shadow:-2px -1px 20px -5px #000}.audio__seek-slider::-ms-thumb{display:none}.audio__seek-slider::-webkit-slider-runnable-track{width:100%;height:2px;cursor:pointer}.audio__seek-slider::-moz-range-track{width:100%;height:3px;cursor:pointer;background-color:transparent}.audio__seek-slider::-ms-track{display:none}.author{margin:1.5625rem 0}.author__headline,.author__image{margin-bottom:.5rem;text-align:center}.author__image img{border-radius:50%;max-width:5.5rem}.author__headline{font-family:Helvetica,sans-serif;font-weight:700}.body--fonts-loaded .author__headline{font-family:FreightSansPro,Helvetica,sans-serif}.author__bio{margin-bottom:.8125rem;font-style:italic}.author__link{text-align:left}.contact-form,.link-list,.list-numbered li:before,.navigation__ctas,.navigation__dme-promo,.navigation__social-links,.push-arrow{text-align:center}.author__link a{font-family:Helvetica,sans-serif;text-decoration:none;line-height:1.75;font-size:1rem;font-weight:700}.body--fonts-loaded .author__link a{font-family:FreightSansPro,Helvetica,sans-serif}.author__link .icon{margin-left:.625rem;width:1.125rem;height:.75rem;fill:currentColor}.card-teaser .link--block-wrapper:focus .card-teaser__image:before,.card-teaser .link--block-wrapper:hover .card-teaser__image:before{transition:opacity .3s ease;opacity:1}.card-teaser__image:after{content:'';display:block;width:100%;height:0;padding:66.667% 0 0}.case-study-header__title:after,.case-study-header__title:before{vertical-align:middle;display:inline-block;width:40px;height:3px;margin:0 10px;content:'';background-color:#d3d3d3;opacity:.4}.new-typography .code:before{display:block;position:absolute;top:0;left:0;background-color:#37a9ef;width:6px;height:100%;content:''}.old-typography .code{display:block;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;text-size-adjust:none;word-break:normal;line-height:1.5;color:#185d87;font-size:.875rem}.old-typography .code pre{padding-left:2.625rem;margin:0;padding-top:1rem;padding-bottom:1rem}.contact-form{padding-bottom:5.25rem;padding-top:0}.contact-form input,.contact-form textarea{position:relative;z-index:2;display:block}.contact-form label{position:relative}.contact-form input:focus::-webkit-input-placeholder{color:transparent}.contact-form input:focus:-ms-input-placeholder{color:transparent}.contact-form input:focus::placeholder{color:transparent}.contact-form textarea:focus::-webkit-input-placeholder{color:transparent}.contact-form textarea:focus:-ms-input-placeholder{color:transparent}.contact-form textarea:focus::placeholder{color:transparent}.contact-form__form__item:last-child{margin-bottom:3.5rem;border-left:1px solid #ced4d6;width:100%}input:focus+.contact-form__form__form-label,textarea:focus+.contact-form__form__form-label{font-family:Helvetica,sans-serif;line-height:1.75;font-size:1rem;margin-top:0;margin-bottom:0;top:-2.875rem;z-index:15;margin-left:.625rem;background:#a3afb9;padding:.3125rem .625rem;color:#fff}.body--fonts-loaded input:focus+.contact-form__form__form-label,.body--fonts-loaded textarea:focus+.contact-form__form__form-label{font-family:FreightSansPro,Helvetica,sans-serif}input:focus+.contact-form__form__form-label:after,textarea:focus+.contact-form__form__form-label:after{display:block;position:absolute;bottom:-.375rem;left:.625rem;border:0 solid transparent;border-top:6px solid #a3afb9;border-right-width:6px;border-left-width:6px;width:0;height:0;content:''}.cover-image--with-image{background-repeat:no-repeat;background-position:center center;background-size:cover;z-index:0}.cover-image--with-image.cover-image--with-gradient:after{display:block;position:absolute;bottom:0;z-index:1;background:linear-gradient(to top,rgba(0,0,0,.7),transparent);width:100%;height:100%;content:''}.footer__item:after{content:" ";display:block;clear:both}.headshot-square:after{position:absolute;bottom:0;left:0;z-index:1;background-image:linear-gradient(to top,rgba(0,0,0,.4) 0,transparent 100%);width:100%;height:4rem;content:''}a:hover .headshot-square__title{color:#ffde8b}.icon--dribbble,.icon--drupal,.icon--facebook,.icon--flickr,.icon--github,.icon--googleplus,.icon--lanyrd,.icon--linkedin,.icon--twitter{fill:#2284c0}.icon--flickr{padding-top:10%;padding-bottom:10%}.icon--comments{fill:#37a9ef}.icon--arrow-right,.icon--rss{fill:#ffde8b}.icon--search{fill:#a3afb9}.icon--arrow-down{fill:#fff}.icon__wrapper{display:inline-block}.link-list{padding:0 9.842519685%}.link-list ul{margin:0;padding:0;list-style-type:none}.link-list__title:after,.link-list__title:before{vertical-align:middle;display:inline-block;width:60px;height:3px;margin:0 10px;content:'';background-color:#e5e5e5}.link-list__link a:hover,.link-list__more a:hover{color:#e2311e}.list-numbered li:before{display:block;position:absolute;top:.875rem;left:0;width:42px;content:counter(numbers)}.list-numbered li:first-child{counter-reset:numbers}.list-numbered li:last-child{border-bottom-color:transparent}.navigation{z-index:100}.navigation:after{content:" ";display:block;clear:both}.navigation .link{color:#2284c0}.navigation .link:focus,.navigation .link:hover,.navigation__branding a:hover{color:#e2311e}.navigation .icon{transition:fill .3s ease-in-out}.navigation .icon--lullabot-logo-wordmark{margin-right:-.3125rem;width:7.3125rem;height:1.8125rem}.navigation .icon--search{position:absolute;top:1.4375rem;right:1.5625rem;width:1.3125rem;height:1.3125rem}.navigation .social-links .icon{fill:#37a9ef}.navigation .social-links .icon:hover{fill:#e2311e}.navigation .site-name{float:left}.navigation.is-push-down{min-height:4.375rem}.navigation.is-visible .navigation__header{border-bottom:2px solid #efefef}.navigation.is-hidden:not(.is-open) .navigation__header{-ms-transform:translateY(-3.75rem);transform:translateY(-3.75rem);opacity:0}.navigation.is-open .navigation__header{border-bottom:0}.navigation__search{display:inline-block;position:relative;padding:.9375rem 0 .9375rem .9375rem;width:calc(100% - 11.875rem)}.navigation__search-input{padding-left:.9375rem;width:100%;height:2.3rem}.navigation__header,.navigation__main{top:0;width:100vw;max-width:120rem;left:0;right:0}.navigation__header{position:fixed;-ms-transform:translateY(0);transform:translateY(0);transition:transform .2s ease-in,opacity .3s ease-out;z-index:100;margin:0 auto;background-color:rgba(255,255,255,.96);height:4.1875rem;backface-visibility:hidden}.navigation__branding{display:inline-block;position:relative;float:right;z-index:1;margin-right:.9375rem;pointer-events:auto}.navigation__main{position:fixed;transition:opacity .3s,visibility 0s .3s;visibility:hidden;opacity:0;z-index:50;background:rgba(255,255,255,.96);min-width:20rem;height:100%;overflow:auto;-ms-overflow-style:-ms-autohiding-scrollbar}.navigation__main::-webkit-scrollbar{display:none}.is-open .navigation__main{transition:opacity .3s;visibility:visible;opacity:1;height:100%}.navigation__primary-menu{padding:0;list-style:none;text-align:center}body .navigation__primary-menu{margin:6.25rem 0 1.5rem}.navigation__primary-menu__item{line-height:1.5;font-size:1.875rem}.navigation__primary-menu__item .link{text-decoration:none;font-weight:300}.navigation__ctas{margin-bottom:1.5rem;line-height:1.75rem;font-size:1rem}.navigation__ctas .link{text-decoration:none;font-weight:400;font-style:italic}.navigation__ctas .navigation__ctas__cta:after{display:inline-block;margin:0 .9375rem;color:#a3afb9;content:'//'}.navigation__ctas .navigation__ctas__cta:last-child:after{margin:0;content:''}.navigation__dme-promo{margin:1.5rem 0}.navigation__dme-promo .link{font-family:Helvetica,sans-serif;margin-bottom:2rem;text-decoration:none;line-height:1.5;color:#37a9ef;font-size:1.25rem;font-weight:700}.body--fonts-loaded .navigation__dme-promo .link{font-family:FreightSansPro,Helvetica,sans-serif}.navigation__dme-promo .icon--arrow-right{margin-left:.3125rem;width:1.25rem;height:.75rem;fill:currentColor}.navigation__dme-promo__label{display:block;line-height:1.75;color:#6a7c8b;font-size:1rem;font-style:italic}.navigation__dme-promo__label:after,.navigation__dme-promo__label:before{vertical-align:middle;display:inline-block;width:1.875rem;height:3px;margin:0 10px;content:'';background-color:rgba(163,175,185,.3)}.navigation__icon{display:inline-block;position:relative;padding:1.5rem 0 1.375rem 1.0625rem;height:3.75rem}.navigation__icon__label{display:none}a:hover .navigation__icon__label{color:#e2311e}.navigation__icon__line,.navigation__icon__line:after,.navigation__icon__line:before{display:block;position:absolute;background:#37a9ef;width:1.5rem;height:.1875rem;content:''}a:hover .navigation__icon__line,a:hover .navigation__icon__line:after,a:hover .navigation__icon__line:before{background:#e2311e}.is-open .navigation__icon__line,.is-open .navigation__icon__line:after,.is-open .navigation__icon__line:before{width:1.5625rem;height:.25rem}.layout-case-study-syfy .navigation__icon__line:after,.layout-case-study-syfy .navigation__icon__line:before{color:#7337aa}.layout-case-study-msnbc .navigation__icon__line:after,.layout-case-study-msnbc .navigation__icon__line:before{color:#0066ca}.layout-case-study-namm .navigation__icon__line:after,.layout-case-study-namm .navigation__icon__line:before{color:#42adba}.is-open .navigation__icon__line,.is-open a:hover .navigation__icon__line{background:0 0}.navigation__icon__line{right:0}.navigation__icon__line:before{top:.5rem}.is-open .navigation__icon__line:before{-ms-transform:rotate(45deg);transform:rotate(45deg)}.navigation__icon__line:after{top:1rem}.is-open .navigation__icon__line:after{-ms-transform:translateY(-8px) rotate(-45deg);transform:translateY(-8px) rotate(-45deg)}.navigation__crumb{display:none;float:left}.overlay{position:relative}.overlay .icon--contact-close:hover{opacity:.8}.overlay--video .video{padding-top:0}.overlay--video .video iframe,.overlay--video .video video{position:static;padding:1.5rem;width:100%;height:100vh}.is-overlay{overflow:hidden}.push-arrow{position:absolute;right:0;bottom:0;left:0;z-index:3;width:100%;text-decoration:none}.push-arrow .icon--arrow-down{display:block;margin:0 auto;padding:.25rem 0 1.5rem;width:.8125rem;height:.5rem;box-sizing:content-box}.push-arrow:focus,.push-arrow:hover{color:#e2311e}.push-arrow--light-grey:focus,.push-arrow--light-grey:hover{color:#fff}.push-arrow--mid-grey:focus,.push-arrow--mid-grey:hover{color:#a3afb9}.old-typography .quote:after{content:" ";display:block;clear:both}.old-typography .quote--testimonial .quote__content:before{content:open-quote}.old-typography .quote--testimonial .quote__content:after{content:close-quote}.old-typography .quote--testimonial .quote__citation-suffix:before{margin:0 .5rem 0 .625rem;color:#a3afb9;content:'//'}.related-links__related__inner li:after{display:block;background-image:url(/images/sprites/misc/quote-dot-pattern.svg);background-repeat:repeat-x;background-position:left bottom;background-size:.5625rem;height:.625rem;content:''}.related-links__related__inner li:last-child:after{background-image:none}.old-typography .rich-text__picture{position:relative;left:50%;clear:both;-ms-transform:translateX(-50%);transform:translateX(-50%);margin:0;width:100%;width:100vw}.old-typography .rich-text__picture img{display:block;margin:0;width:100%}.old-typography .rich-text__picture--medium{display:block;margin-right:auto;margin-left:auto;padding-bottom:1rem;width:100%;overflow:hidden}.old-typography .rich-text__figure--with-border:after,.old-typography .rich-text__picture--with-border:after{content:" ";display:block;clear:both}.old-typography .rich-text__picture--with-border img{border:3px solid #f7f7f7}.old-typography .rich-text pre{position:relative;left:50%;-ms-transform:translateX(-50%);transform:translateX(-50%);background-color:#f7f7f7;padding:1rem 2.625rem;width:100%;width:100vw}.old-typography .rich-text h3{margin-top:1.734rem;margin-bottom:0;line-height:1}.old-typography table{display:inline-block;position:relative;left:50%;-ms-transform:translate(-50%,0);transform:translate(-50%,0);margin:1em auto 2em;border:1px solid #ced4d6;max-width:100%;overflow:auto}.new-typography .rich-text p:last-child,.snippet-list{margin-bottom:0}.old-typography thead{background:#efefef;vertical-align:bottom}.old-typography td,.old-typography th{border-bottom:1px solid #ced4d6;padding:.5em .75em;text-align:left;font-size:.95em}.new-typography .rich-text .rich-text--responsive-table--row-strategy td[data-label]:first-child,.old-typography .rich-text--responsive-table--row-strategy td[data-label]:first-child{padding-top:0}.old-typography td{vertical-align:top}.old-typography th{border-bottom-color:#a3afb9;font-weight:700}.old-typography .rich-text--responsive-table--row-strategy td[data-label]:before{display:block;font-weight:700;content:attr(data-label)}.new-typography .rich-text .code:after,.new-typography .rich-text .rich-text__embed:after{content:" ";display:block;clear:both}.new-typography .rich-text .rich-text--responsive-table--row-strategy td[data-label]:before{display:block;font-weight:700;content:attr(data-label)}.series-list li:before{display:table-cell;border-top:3px solid #f7f7f7;padding:0 1rem;vertical-align:middle;color:#a3afb9;font-size:2.25rem;font-weight:700;content:counter(item) " ";counter-increment:item}.services-tiles{clear:both;background-color:#f7f7f7}.services-tiles .link,.services-tiles a{display:block;transition:all .3s ease;margin:0;height:168px;text-decoration:none;color:#2284c0;padding:1.75rem 28px}.services-tiles .link.is-active,.services-tiles .link:focus,.services-tiles .link:hover,.services-tiles a.is-active,.services-tiles a:focus,.services-tiles a:hover{background:#37a9ef;color:#ffde8b}.services-tiles .link.is-active .icon,.services-tiles .link:focus .icon,.services-tiles .link:hover .icon,.services-tiles a.is-active .icon,.services-tiles a:focus .icon,.services-tiles a:hover .icon{border-color:#2284c0;fill:#fff}.snippet-list-topics__item:last-of-type,.teaser--with-border:last-child{border-bottom:0}.services-tiles .icon{transition:all .3s ease;padding-right:.625rem;max-width:5.9375rem;height:7rem;vertical-align:middle;fill:#37a9ef}body .site-name{display:inline;position:relative;z-index:1;margin:0;padding:0 0 0 1.5625rem;height:3.625rem;vertical-align:middle;line-height:4.9;color:#fff;font-size:1rem;pointer-events:all}.snippet-list{line-height:1.4;font-size:1.25rem;margin-top:0;font-weight:300;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.social-links{margin:0 auto;padding:0;max-width:16.25rem;list-style:none}.social-links .icon__wrapper{display:inline}.social-links .icon{height:1.25rem;fill:#a3afb9}.social-links__item{display:inline-block;max-width:2.25rem}.social-links--with-labels li:last-child .social-links__item-label{padding-right:0}.social-links--with-dividers .social-links__item .link:after{display:table-cell;padding-right:1rem;padding-left:.5rem;vertical-align:middle;line-height:1rem;color:rgba(255,255,255,.5);content:'//'}.social-links--with-dividers .social-links__item:last-child .link:after{display:none}.teaser:after{content:" ";display:block;clear:both}.teasers-paged__teaser:first-child{padding-top:4.0625rem}.teasers-paged__load-more:hover{background:#e2311e}.old-typography .topic-list ul{margin:0;padding:.625rem 0 0;text-align:center;line-height:1.5;font-size:1.125rem;list-style-type:none}.old-typography .topic-list li{display:inline;color:#55636f}.old-typography .topic-list li:before{padding-right:.1875rem;content:', '}.old-typography .topic-list li:last-child:before{margin:0 .1875rem;content:' &'}.old-typography .topic-list li:last-child:after{content:''}.old-typography .topic-list li:first-child:before,.old-typography .topic-list li:only-child:before{margin:0;content:''}.old-typography .topic-list li a{text-decoration:none;font-weight:400}.old-typography .topic-list__title{position:relative;margin-bottom:0;width:100%;text-align:center;text-transform:uppercase;line-height:1.5;color:#55636f;font-size:1.125rem}.old-typography .topic-list__title__dashed{font-family:Georgia,serif;display:block;text-transform:lowercase;font-weight:400;font-style:italic}.body--fonts-loaded .old-typography .topic-list__title__dashed{font-family:FreightTextPro,Georgia,serif}.old-typography .topic-list__title__dashed span{position:relative;z-index:10;background:#fff;padding:0 1rem;line-height:1.5;font-size:1.125rem}.new-typography .topic-list .topic-list__title__dashed:after,.old-typography .topic-list__title__dashed:after{display:block;position:absolute;bottom:.625rem;z-index:1;background-color:#f7f7f7;width:100%;height:.1875rem;vertical-align:middle;content:' '}.new-typography .topic-list li:before{padding-right:.1875rem;content:', '}.new-typography .topic-list li:last-child:before{margin:0 .1875rem;content:' &'}.new-typography .topic-list li:last-child:after{content:''}.new-typography .topic-list li:first-child:before,.new-typography .topic-list li:only-child:before{margin:0;content:''}.tweet__column-left a:last-of-type svg{width:1.3125rem}.tweet__name+a:focus,.tweet__name+a:hover{margin-right:.3125rem;text-decoration:none}.video{position:relative;padding-top:25px;padding-bottom:56.25%;height:0}.video iframe{position:absolute;top:0;left:0;width:100%;height:100%}.article-hero a{text-decoration:none;color:#2284c0}.article-hero--background .cover-image{position:relative;margin:0 auto 3rem;width:100%;max-width:120rem;text-align:center;color:#fff}.article-hero--background a,.podcast-landing__content .link:hover,.podcast-landing__links__social .link:hover{color:#ffde8b}.article-hero--background .article-hero__content{position:absolute;bottom:18%;left:50%;-ms-transform:translateX(-50%);transform:translateX(-50%);z-index:10;margin:0;padding:0 2.625em;width:100%}.article-hero--background .article-hero__title{position:relative;z-index:10;margin:0 auto .75rem;max-width:47.8125rem}.article-hero--background.article-hero--inverted .cover-image--with-image.cover-image--with-gradient:after{background:linear-gradient(to top,rgba(255,255,255,.7),rgba(255,255,255,0))}.article-hero__title{margin-top:.9375rem}.article-hero__meta{position:relative;z-index:10}.article-hero__author{display:block;font-style:italic}.article-hero__date{font-family:Helvetica,sans-serif}.body--fonts-loaded .article-hero__date{font-family:FreightSansPro,Helvetica,sans-serif}.article-hero--background .article-hero__date{text-transform:uppercase;font-weight:700}.podcast-landing:after{content:" ";display:block;clear:both}.podcast-landing__links:after{display:block;margin:2rem auto 0;background:url(/images/sprites/misc/quote-dot-pattern-white.svg) repeat-x;background-size:11px;width:75%;height:3px;content:''}.podcast-landing__links__social .link:hover .icon{fill:#ffde8b}.podcast-landing__latest-number>span:first-child{font-weight:700}.profile-expertise{background:#2284c0;padding:2.5rem 1rem;text-align:center;color:#fff}.profile-expertise__headline:after,.profile-expertise__headline:before{vertical-align:middle;display:inline-block;width:30px;height:3px;margin:0 10px;content:'';background-color:#37a9ef}.profile-location{display:table;margin:0 auto 1.5rem;padding:0;width:100%;max-width:48rem;text-align:center;line-height:1.25;font-size:1.375rem;font-weight:300}.promo-become-bot-your-project:after{content:" ";display:block;clear:both}.promo-become-bot-your-project__item:first-child{padding-bottom:1.875rem}.promo-become-bot-your-project__item:last-child h3{background-image:url(/images/sprites/misc/quote-dot-pattern.svg);background-repeat:repeat-x;padding-top:3.125rem}.promo-bravotv__inner:after{position:absolute;top:0;left:0;background:linear-gradient(to top,rgba(0,0,0,.9) 5%,transparent 60%);width:100%;height:100%;content:''}.promoted-case-studies__title:after,.promoted-case-studies__title:before{vertical-align:middle;display:inline-block;width:20%;height:3px;margin:0 10px;content:'';background-color:#f7f7f7}.promo-ctas:after,.promo-footer__main:after,.promoted-case-studies__cases:after{content:" ";display:block;clear:both}.promo-client-list__work__text .link:hover{color:#e2311e}.promo-footer .social-links .icon:hover{fill:#e2311e}.promo-msnbc__inner:after,.promo-newsletter__inner:before{content:'';position:absolute;left:0;width:100%}.promo-msnbc__inner:after{top:0;background:linear-gradient(to top,rgba(0,0,0,.9) 5%,transparent 60%);height:100%}.promo-newsletter__inner:before{display:block;right:0;background:url(/images/sprites/promo/newsletter-stripe.svg) repeat-x #fff;background-size:70px 9px;height:.5625rem}.promo-other-podcasts__podcasts:after{content:" ";display:block;clear:both}.promo-podcast-breaker--insert-content-here .link--cta-button:hover{background:#2284c0}.promo-podcast-breaker .link:hover{color:#ffde8b}.promo-podcast-breaker__meta__number:before{margin:0 .9375rem;content:'//'}.promo-podcast-breaker--insert-content-here .promo-podcast-breaker__meta__number:before{color:#2284c0}.promo-podcast-breaker--drupalizeme-podcast .promo-podcast-breaker__meta__number:before{color:#f44802}.promo-podcast-breaker--hacking-culture .promo-podcast-breaker__meta__number:before{color:#942819}.promo-syfy .link:hover{color:#fff}.promo-text:before{display:inline-block;height:100%;vertical-align:middle;content:''}.promo-text__title a:focus,.promo-text__title a:hover{text-decoration:none;font-weight:700}.promo-tweet-list__tweets:after{content:" ";display:block;clear:both}.promo-your-project a:hover{color:#ffde8b}.promo-your-project__inner:after{position:absolute;top:0;left:0;background:linear-gradient(to bottom,rgba(255,255,255,0) 0,rgba(155,212,247,0) 50%,#37a9ef 100%),rgba(55,169,239,.6);width:100%;height:100%;content:''}@media (min-width:40em){.l-container:after,.layout-case-study .layout-case-study__inner:after,.layout-service__inner:after{content:" ";display:block;clear:both}.l-debug-grid--active:after{background-size:auto 32px}}@media (min-width:80em){.l-container:after,.layout-case-study .layout-case-study__inner:after,.layout-service__inner:after,.new-typography .rich-text .rich-text__figure--half.rich-text__figure--right.rich-text__figure--contained .picture:after,.new-typography .rich-text .rich-text__figure--half.rich-text__figure--right.rich-text__picture--contained .picture:after,.new-typography .rich-text .rich-text__figure--half.rich-text__picture--right.rich-text__figure--contained .picture:after,.new-typography .rich-text .rich-text__figure--half.rich-text__picture--right.rich-text__picture--contained .picture:after,.new-typography .rich-text .rich-text__picture--half.rich-text__figure--right.rich-text__figure--contained .picture:after,.new-typography .rich-text .rich-text__picture--half.rich-text__figure--right.rich-text__picture--contained .picture:after,.new-typography .rich-text .rich-text__picture--half.rich-text__picture--right.rich-text__figure--contained .picture:after,.new-typography .rich-text .rich-text__picture--half.rich-text__picture--right.rich-text__picture--contained .picture:after{content:" ";display:block;clear:both}.l-debug-grid--active:after{background-size:auto 35px}}@media (min-width:40em){.l-debug-grid--active:before{-ms-transform:translate(-16px,0);transform:translate(-16px,0);background-image:linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3)),linear-gradient(to right,rgba(0,0,0,.3),rgba(0,0,0,.3));background-size:16px 100%,32px 100%,32px 100%,32px 100%,32px 100%,32px 100%,32px 100%,32px 100%,32px 100%,32px 100%,32px 100%,32px 100%,16px 100%;width:calc(100% + 32px);background-position-x:16px,8.333333333%,16.666666667%,25%,33.333333333%,41.666666667%,50%,58.333333333%,66.666666667%,75%,83.333333333%,91.666666667%,calc(100% - 16px)}h1{margin-bottom:2rem;font-size:3.375rem}}@media (min-width:80em){.l-debug-grid--active:before{-ms-transform:translate(-17.5px,0);transform:translate(-17.5px,0);background-size:17.5px 100%,35px 100%,35px 100%,35px 100%,35px 100%,35px 100%,35px 100%,35px 100%,35px 100%,35px 100%,35px 100%,35px 100%,17.5px 100%;width:calc(100% + 35px);background-position-x:17.5px,8.3333333333%,16.666666667%,25%,33.333333333%,41.666666667%,50%,58.333333333%,66.666666667%,75%,83.333333333%,91.666666667%,calc(100% - 17.5px)}h1{font-size:4rem}}@media (min-width:40em){h2{font-size:1.75rem}h3{font-size:1.25rem}body{font-size:1.125rem}.link--with-border:after{margin-bottom:3px}}@media (min-width:80em){body{font-size:1.25rem}}@media all and (device-width:40em) and (device-height:64em) and (orientation:portrait){.cover-image--with-image{max-height:64rem}}@media all and (device-width:40em) and (device-height:64em) and (orientation:landscape){.cover-image--with-image{max-height:48rem}}@media screen and (device-aspect-ratio:40 / 71){.cover-image--with-image{max-height:31.25rem}}@keyframes showHide{0%{opacity:0}100%{opacity:1}}@media (min-width:40em){.layout-article__article-content-lead p{font-size:1.5rem}.layout-article__article-topics{margin:3.5rem 0 .8125rem}}@media (min-width:40em){.layout-article__article-related li:after{width:30.2469135802%;float:left;margin-left:34.8765432099%;margin-right:-100%}.layout-article__comments{margin-bottom:7rem}}@media (min-width:80em){.layout-article__article-content-lead p{font-size:1.625rem}.layout-article__article-topics{margin-top:3.125rem}.layout-article__comments{margin-bottom:10rem}}@media (min-width:40em){.layout-article__series{width:47.6851851852%;float:right;margin:0 0 0 2rem}.layout-case-study-grammy__grid:after{content:" ";display:block;clear:both}}@media (min-width:920px){.layout-article__series{margin-right:calc((100vw - 900px) * -.5)}}@media (min-width:80em){.layout-article__series{width:48.7046632124%;float:right;margin-right:-190px}}@media (min-width:40em){.layout-case-study-namm__branding:after{content:" ";display:block;clear:both}.layout-case-study .layout-case-study__content ul li:not(:last-child){margin-bottom:1rem}.layout-case-study .layout-case-study__content .rich-text__content>:not(.quote){width:82.9514207149%;float:left;margin-right:2.2914757104%;margin-left:9.1535433071%}}@media (min-width:80em){.layout-case-study .layout-case-study__content ul li:not(:last-child){margin-bottom:1.09375rem}.layout-case-study .layout-case-study__content .rich-text__content>:not(.quote){width:65.9028414299%;float:left;margin-right:2.2914757104%;margin-left:18.3070866142%}.layout-article__article-content,.related-links,.u-layout-full-width-copy-container{max-width:55.5rem}}@keyframes videoFadeIn{from{opacity:0}to{opacity:1}}@media (min-width:40em){.layout-clients .logo-tile:last-child{border-right:0}.layout-article__article-content,.related-links,.u-layout-full-width-copy-container{padding-right:3.75rem;padding-left:3.75rem;max-width:55.5rem}.layout-homepage__services-tiles .services-tiles .link:focus,.layout-homepage__services-tiles .services-tiles .link:hover,.layout-homepage__services-tiles .services-tiles a:focus,.layout-homepage__services-tiles .services-tiles a:hover{background-color:#f7f7f7}.layout-homepage__services-tiles .services-tiles .link:focus .icon,.layout-homepage__services-tiles .services-tiles .link:hover .icon,.layout-homepage__services-tiles .services-tiles a:focus .icon,.layout-homepage__services-tiles .services-tiles a:hover .icon{border-bottom:3px solid #ced4d6}.layout-podcast-show__hosts:after,.layout-podcast-show__hosts:before{vertical-align:middle;display:inline-block;width:5rem;height:3px;margin:0 10px;content:'';background-color:rgba(205,235,249,.4)}.layout-podcast-show__host-teasers .author__image:after{display:none}.layout-podcasts-landing__retired>h3:after,.layout-podcasts-landing__retired>h3:before{width:45px}.layout-series__series-related li:after{width:30.2469135802%;float:left;margin-left:34.8765432099%;margin-right:-100%}.layout-welcome__brick p:first-child{padding-top:1.5rem}.layout-welcome__brick p:last-child{padding-bottom:99px}.layout-what-we-do__section:after{content:" ";display:block;clear:both}}@media (min-width:40em){.layout-who-we-are__hero__video-loop::-webkit-media-controls{display:none}.layout-who-we-are__stats__content:after,.layout-who-we-are__stats__content:before{vertical-align:middle;display:inline-block;width:5rem;height:3px;margin:0 10px;content:'';background-color:#f7f7f7}.layout-who-we-are__stats__item:after{display:inline-block;position:absolute;top:calc(50%);right:0;border-radius:50%;background:#185d87;width:.25rem;height:.25rem;content:''}.author{display:table;width:auto;margin:2rem 0}.author .author__content,.author .author__image{display:table-cell;vertical-align:middle;text-align:left}.author .author__image{padding-right:2%}.author .author__image>img{display:block;max-width:none}.author .author__content{width:100%}}@-moz-document url-prefix(){.audio .audio__seek{top:-12px}}@media (min-width:80em){.layout-welcome__brick p:last-child{padding-bottom:0}.author{margin:3.25rem 0}.author__image img{margin-left:-25%}}@media (min-width:40em){.author__image{text-align:left}.author .author__image{padding-right:0}.author__content{padding-left:1.25rem}.author__headline{text-align:left}.author__bio{margin-bottom:0}.card-teaser .link--block-wrapper:focus,.card-teaser .link--block-wrapper:hover{background:#000}.card-teaser .link--block-wrapper:focus,.card-teaser .link--block-wrapper:focus .card-teaser__button,.card-teaser .link--block-wrapper:focus .card-teaser__text,.card-teaser .link--block-wrapper:focus .card-teaser__title,.card-teaser .link--block-wrapper:hover,.card-teaser .link--block-wrapper:hover .card-teaser__button,.card-teaser .link--block-wrapper:hover .card-teaser__text,.card-teaser .link--block-wrapper:hover .card-teaser__title{color:#ffe5b2}.card-teaser__image:before{position:absolute;transition:opacity .3s ease;opacity:0;background:linear-gradient(to right,transparent 0,#000 100%);width:100%;height:100%;content:''}.card-teaser--right .card-teaser__image:before{background:linear-gradient(to left,transparent 0,#000 100%)}.case-study-header__title:after,.case-study-header__title:before{width:45px}.old-typography .code{line-height:1.5;font-size:1.125rem}.old-typography .code pre{padding-left:3.75rem;padding-top:1.5rem;padding-bottom:1.5rem}.contact-form{padding-bottom:6rem}}@media (max-width:39.937em){.old-typography .code pre::-webkit-scrollbar{-webkit-appearance:none}.old-typography .code pre::-webkit-scrollbar:horizontal{height:.375rem}.old-typography .code pre::-webkit-scrollbar-thumb{background:#37a9ef}.old-typography .code pre::-webkit-scrollbar-track{background-color:#efefef}}@media (min-width:80em){.old-typography .code pre{padding-left:3.8125rem}.contact-form{padding-bottom:6.5625rem}}@media (min-width:40em){.contact-form{padding-bottom:7rem}.contact-form textarea{border-left:0}}@media (min-width:40em) and (min-width:40em){.contact-form{padding-bottom:8rem}}@media (min-width:40em) and (min-width:80em){.contact-form{padding-bottom:8.75rem}}@media (min-width:80em){.contact-form{padding-bottom:8.75rem}}@media (min-width:80em) and (min-width:40em){.contact-form{padding-bottom:10rem}}@media (min-width:80em) and (min-width:80em){.contact-form{padding-bottom:10.9375rem}}@media (min-width:40em){.contact-form__form__item:last-child{margin-bottom:4rem}.link-list{padding:0}}@media (min-width:80em){.contact-form__form__item:last-child{margin-bottom:4.375rem}}@media (max-width:23em){.navigation .icon--search{display:none}}@media (min-width:40em){.link-list__title:after,.link-list__title:before{width:120px}.navigation .site-name{margin:0 2.5rem}.navigation.is-hidden:not(.is-open) .navigation__header{-ms-transform:translateY(-6.25rem);transform:translateY(-6.25rem)}.navigation__search{width:calc(100% - 26.25rem)}.has-crumb .navigation__search{width:calc(100% - 35.75rem)}.navigation__header{height:4.375rem}.navigation__branding{margin-right:3.875rem}.navigation__main{margin:0 auto}.navigation__primary-menu__item{font-size:2.25rem}}@media (min-width:48em) and (min-height:46em){body .navigation__primary-menu{margin:7rem 0 2.25rem}.navigation__dme-promo{margin-top:2.5rem}}@media all and (max-height:39.5em) and (min-width:40em),all and (max-height:39.5em) and (orientation:landscape){.navigation__primary-menu__item{display:inline-block;width:48%}.navigation__primary-menu__item:nth-child(2n){padding-left:2rem;text-align:left}.navigation__primary-menu__item:nth-child(2n+1){padding-right:2rem;text-align:right}}@media (min-width:40em){.navigation__ctas{font-size:1.125rem}}@media (min-width:80em){.navigation__ctas{font-size:1.25rem}}@media (max-height:16em){.navigation__ctas{margin-bottom:3rem}}@media (min-width:80em) and (min-height:50em){.navigation__dme-promo{margin-top:3.125rem}}@media (min-width:40em){.navigation__dme-promo .link{font-size:1.5rem}.navigation__icon{width:6.25rem}}@media (min-width:80em){.navigation__dme-promo .link{font-size:1.625rem}.old-typography .rich-text pre{max-width:80rem}}@media (min-width:40em){.navigation__icon__label{font-family:Helvetica,sans-serif;display:inline-block;float:left;margin-right:6.25rem;text-transform:uppercase;line-height:1.2;color:#2284c0;font-size:1rem;font-weight:700}.body--fonts-loaded .navigation__icon__label{font-family:FreightSansPro,Helvetica,sans-serif}.navigation__icon__line,.navigation__icon__line:after,.navigation__icon__line:before{transition:transform .3s ease-in-out}.navigation__crumb{display:inline-block}.navigation__crumb a{text-decoration:none;line-height:3.75;font-size:1rem;font-style:italic}.navigation__crumb:after{margin-left:.9375rem;color:#ced4d6;content:'//'}.push-arrow .icon--arrow-down{padding:.25rem 0 3.5rem}.related-links__related__inner li:after{width:30.2469135802%;float:left;margin-left:34.8765432099%;margin-right:-100%}.old-typography .rich-text__picture{margin:1rem 0}.old-typography .rich-text pre{border-left:.375rem solid #37a9ef;padding:1.5rem 3.75rem;width:calc(100vw - 2rem)}.old-typography .rich-text--responsive-table--row-strategy td[data-label]:first-child{padding-top:.5em}.old-typography .rich-text--responsive-table--row-strategy td[data-label]:before{display:none;content:normal}.new-typography .rich-text .rich-text--responsive-table--row-strategy td[data-label]:first-child{padding-top:.5em}.new-typography .rich-text .rich-text--responsive-table--row-strategy td[data-label]:before{display:none;content:normal}.services-tiles{max-width:100%;margin-left:auto;margin-right:auto}.services-tiles:after{content:" ";display:block;clear:both}.services-tiles .link,.services-tiles a{padding-left:32px;padding-right:32px}}@media (min-width:40em){.services-tiles .link,.services-tiles a{padding-top:2rem;padding-bottom:2rem}}@media (min-width:80em){.services-tiles .link,.services-tiles a{padding:2.1875rem 35px}}@media (min-width:40em){.services-tiles .link,.services-tiles a{padding:3.125rem 2.1875rem;height:16rem}}@media (min-width:80em){.services-tiles .link,.services-tiles a{padding:5.625rem 2.1875rem;height:24.0625rem}}@media (min-width:40em){.services-tiles .icon{border-bottom:3px solid #efefef;padding-right:0;padding-bottom:20px;height:8.75rem;vertical-align:baseline}.snippet-list{max-width:100%;line-height:1.3913043478;font-size:1.4375rem;display:block;margin:0 auto}.snippet-list:after{content:" ";display:block;clear:both}}@media (min-width:25em){.social-links{max-width:none}.social-links__item{max-width:2.65rem}}@media (min-width:80em){.services-tiles .icon{height:10.9375rem}.snippet-list{line-height:1.3461538462;font-size:1.625rem;margin-top:0;margin-bottom:0}.teaser--with-border:last-child .teaser__content{border-bottom:0}}@media (min-width:40em){.teaser__meta-divider:after{margin:0 .9375rem;color:#cdebf9;content:'//'}.old-typography .topic-list ul{padding:0}.article-hero .cover-image{padding-top:8.75rem}.article-hero--background .cover-image{margin-bottom:5rem}.article-hero--background .article-hero__content{padding:0}.article-hero--background .article-hero__title{margin-top:1.125rem}}@media (min-width:80em){.article-hero__title{margin-top:1.25rem}}@media (min-width:40em){.article-hero__author{display:inline}.article-hero__author:after{font-family:Helvetica,sans-serif;margin:0 1.25rem;color:#cdebf9;font-weight:400;font-style:normal;content:'//'}.body--fonts-loaded .article-hero__author:after{font-family:FreightSansPro,Helvetica,sans-serif}.profile-expertise{padding:3.2rem 1rem}}@media (min-width:80em){.podcast-landing__links:after{margin-right:0;margin-left:0;width:auto}.promo-become-bot-your-project__item:first-child{padding-right:2.5rem;padding-bottom:0}.promo-become-bot-your-project__item:last-child{background-image:url(/images/sprites/misc/quote-dot-pattern.svg);background-repeat:repeat-y;padding-top:0;padding-left:2.5rem}.promo-become-bot-your-project__item:last-child h3{background-image:none;padding-top:0}}@media (min-width:40em){.profile-expertise__headline:after,.profile-expertise__headline:before{width:60px}.profile-expertise__item:first-child .icon--lightning-bolt{display:none}.promo-become-bot-your-project__item:last-child h3{margin:0 3.8125rem}}@media (min-width:34em){.promoted-case-studies__title:after,.promoted-case-studies__title:before{vertical-align:middle;display:inline-block;width:32%;height:3px;margin:0 10px;content:'';background-color:#f7f7f7}}@media (min-width:52em){.promoted-case-studies__title:after,.promoted-case-studies__title:before{vertical-align:middle;display:inline-block;width:38%;height:3px;margin:0 10px;content:'';background-color:#f7f7f7}}@media (min-width:80em){.promoted-case-studies__title:after,.promoted-case-studies__title:before{vertical-align:middle;display:inline-block;width:41%;height:3px;margin:0 10px;content:'';background-color:#f7f7f7}}@media (min-width:40em){.promoted-case-studies .link:first-child .promoted-case-studies__case{padding-top:75%}.promoted-case-studies .link:first-child .promoted-case-studies__case-deck{display:block}.promo-other-clients__clients:after{content:" ";display:block;clear:both}}@media (min-width:80em){.promoted-case-studies .link:first-child .promoted-case-studies__case{padding-top:50%}}</style>  <link rel="stylesheet" href="./Understanding JavaScript behaviors in Drupal _ Lullabot_files/style.b412e049384e.css" media="all"><script async="" src="./Understanding JavaScript behaviors in Drupal _ Lullabot_files/analytics.js"></script><script>var _initialDocument = {"_id":"64bf94bb-604f-44ee-95d9-b44eac5601cc","_rev":"9-4cebfb9998ec187b3fce99c65dcbbf6e","nid":"815","vid":"2121","vuuid":"f01865f5-d919-4701-8197-ed19c9e9c775","type":"article","title":"Understanding JavaScript behaviors in Drupal","published":"1422982800","full_slug":{"articles":35,"understanding-javascript-behaviors-in-drupal":815},"full_slug_flat":"articles/understanding-javascript-behaviors-in-drupal","legacy_nid":"1663","deck":"Make your JavaScript more efficient by mastering Drupal behaviors","body":{"value":"<p>﻿I can barely remember the first time I added JavaScript to a Drupal page using a custom module. I'm sure looked at the documentation, took the example snippet, tweaked it, tested it, and moved on to something else. It was only later, using a debugger, that I saw how Drupal's \"behavior\" system worked and realized that my code was not being executed as I expected.</p>\n\n<p>In this article, we'll cover the key facts about Drupal behaviors, then look at a real Drupal project to inspect its behaviors and optimize them.</p>\n\n<h2>Unraveling Drupal behaviors</h2>\n\n<p><a href=\"https://www.drupal.org/node/756722\">Drupal’s official JavaScript</a> documentation suggests that modules should implement JavaScript by attaching logic to <code>Drupal.behaviors</code>. Here is an example taken from that page:</p>\n\n<pre>\n  <code>\nDrupal.behaviors.exampleModule = {\n  attach: function (context, settings) {\n    $('.example', context).click(function () {\n      $(this).next('ul').toggle('show');\n    });\n  }\n};\n  </code>\n</pre>\n\n<p>Drupal core will call attached behaviors when the <a href=\"http://en.wikipedia.org/wiki/Document_Object_Model\">DOM</a> (the object representation of the HTML) is fully loaded, passing in two arguments:</p>\n\n<ul><li>context: which contains the DOM.</li>\n\t<li>settings: which contains all the settings injected server side.</li>\n</ul>\n\n<p>We can confirm this at the following snippet extracted from Drupal core’s <code>misc/drupal.js</code>:</p>\n\n<pre>\n  <code>\n// Attach all behaviors.\n$(function () {\n  Drupal.attachBehaviors(document, Drupal.settings);\n});\n  </code>\n</pre>\n\n<p><em>NOTE: <code>$(function ()</code> is a shorthand for <code>$(document).ready()</code>. See <a href=\"http://api.jquery.com/ready\">http://api.jquery.com/ready</a> for further details.</em></p>\n\n<p>Now here is the point where I had that “aha!” moment the first time I watched the code execute in a debugger: <code>Drupal.attachBehaviors()</code> may be called more times under different circumstances after the DOM is loaded. For instance, Drupal core will also call <code>Drupal.attachBehaviors()</code> in these scenarios:</p>\n\n<ul><li>After an administration overlay has been loaded into the page.</li>\n\t<li>After the <a href=\"https://www.drupal.org/node/752056\">AJAX Form API</a> has submitted a form.</li>\n\t<li>When an AJAX request returns a command that modifies the HTML, such as <a href=\"https://api.drupal.org/api/drupal/includes%21ajax.inc/function/ajax_command_replace/7\">ajax_command_replace()</a>.</li>\n</ul>\n\n<p>Furthermore, modules may call <code>Drupal.attachBehaviors()</code> as well. Here are some examples:</p>\n\n<ul><li>CTools calls it after a modal has been loaded.</li>\n\t<li>Media calls it after the media browser has been loaded.</li>\n\t<li>Panels calls it after in-place editing has been completed.</li>\n\t<li>Views calls it after loading a new page that uses AJAX.</li>\n\t<li>Views Load More calls it after loading the next chunk of items.</li>\n\t<li>JavaScript from custom modules may call <code>Drupal.attachBehaviors()</code> when they add or change parts of the page.</li>\n</ul>\n\n<p>The first time that <code>Drupal.attachBehaviors()</code> is called, the <code>context</code> variable contains the <code>document</code> object representing the DOM, but for the rest of the calls <code>context</code> will hold the affected piece of HTML. This is often overlooked by developers, leading to inefficient code that either causes tricky bugs or stresses the browser.</p>\n\n<p>How can we make sure that existing Drupal behaviors take this into account? In the following section we will debug and analyze them in a real Drupal project.</p>\n\n<h2>Navigating through Drupal behaviors</h2>\n\n<p>While working on a Drupal project, I like to open a page and debug which behaviors are executed to make sure that they are efficient. I set a breakpoint at <code>Drupal.attachBehaviors()</code>, then open a page and follow the code of each behavior to see what it is doing.</p>\n\n<p>Let’s take the <a href=\"http://www.syfy.com\">Syfy</a> project as an example, where Lullabot helped with its redesign and launch. Using <a href=\"https://developer.chrome.com/devtools\">Google Chrome Developer Tools</a>, we will open Syfy’s homepage and set a breakpoint at the following line of core’s <code>misc/drupal.js</code>:</p>\n\n<p>[image:{\"fid\":\"2332\",\"width\":\"medium\",\"border\":true}]</p>\n\n<p>After reloading the page, the debugger will kick in and stop code execution—waiting for us to make a decision on what to do:</p>\n\n<p>[image:{\"fid\":\"2333\",\"width\":\"medium\",\"border\":true}]</p>\n\n<p>If you do not have experience using a debugger, have a look at the <a href=\"https://developer.chrome.com/devtools/docs/javascript-debugging\">Debugging JavaScript</a> section for Google Chrome. A debugger lets you follow the code step by step inspecting the current variables and letting you write statements against the current context.</p>\n\n<p>We said before that \"Drupal will call all attached behaviors when the DOM is fully loaded, passing as arguments the DOM and all the settings injected server side.” Let’s verify this in the debugger. Here we can see the <code>context</code> and <code>settings</code> variables at the <code>Scope Variables</code> panel:</p>\n\n<p>[image:{\"fid\":\"2334\",\"width\":\"medium\",\"border\":true}]</p>\n\n<p>Most custom behaviors are to be executed just once, so on this first loop things are normally fine. The tricky bit comes later, once all behaviors have been processed and something calls <code>Drupal.attachBehaviors()</code> again. Let’s see an example.</p>\n\n<h2>Testing behaviors on subsequent calls</h2>\n\n<p>Syfy’s homepage has a View of tiles that uses Views Load More module to load extra items at the bottom. We will now scroll down and click on Load More to see what happens:</p>\n\n<p>[image:{\"fid\":\"2335\",\"width\":\"medium\",\"border\":true}]</p>\n\n<p>Drupal calls <code>/views/ajax</code> to load the next list of tiles and once it has appended them to the DOM, it executes <code>Drupal.attachBehaviors()</code> with a subtle difference that we can discover when we inspect its variables in the debugger:</p>\n\n<p>[image:{\"fid\":\"2336\",\"width\":\"medium\",\"border\":true}]</p>\n\n<p>The <code>context</code> variable does not contain the full HTML document but the updated view. This difference is huge. Drupal behaviors that take the <code>context</code> variable into account when selecting portions of the DOM such as <code>$('#some-id', context)</code> will be quickly skipped since they won’t find what they are looking for. Unfortunately, it is a common mistake to overlook this and not use the <code>context</code> variable in jQuery selectors. Here is a behavior that I found while debugging behaviors in this second loop:</p>\n\n<pre>\n  <code>\n/**\n  * Hide menu when Esc is pressed.\n  */\nDrupal.behaviors.syfyGlobalHideMenu = {\n  attach: function (context, settings) {\n    $(document).keyup(function (e) {\n      if (e.keyCode == 27) {\n        $('.nav-flyout', context).removeClass('js-flyout-active');\n      }\n    });\n  }\n};\n  </code>\n</pre>\n\n<p>It sets a listener at the <code>document</code> level to check if the pressed key was Esc in order to gracefully hide the main menu, which is expanded in the following screenshot:</p>\n\n<p>[image:{\"fid\":\"2337\",\"width\":\"medium\",\"border\":true}]</p>\n\n<p>What is the problem here? It uses the <code>context</code> variable to find the menu at <code>$('.nav-flyout', context)</code>, but it does not use <code>context</code> when it sets the keyup listener at <code>$(document).keyup(function(e)</code>. This means that every time Drupal behaviors are processed, it will add a new <code>keyup</code> listener.</p>\n\n<h2>Making behaviors behave</h2>\n\n<p>There are a few ways to fix the above behavior so it sets a listener just once. Let’s see each of them and alter the above behavior accordingly. Here they are.</p>\n\n<h3>Using jQuery Once</h3>\n\n<p>This is the recommended approach at the <a href=\"https://www.drupal.org/node/756722#jquery-once\">Drupal.org JavaScript documentation</a>. jQuery Once makes sure that something is processed just one time by adding a class on a DOM element after the code has run.</p>\n\n<pre>\n  <code>\n/**\n  * Hide menu when Esc is pressed.\n  */\nDrupal.behaviors.syfyGlobalHideMenu = {\n  attach: function (context, settings) {\n    $('.nav-flyout', context).once('remove-modals', function () {\n      $(document).keyup(function (e) {\n        if (e.keyCode == 27) {\n          $('.nav-flyout', context).removeClass('js-flyout-active');\n        }\n      });\n    });\n  }\n};\n  </code>\n</pre>\n\n<p>The above code will add a class <code>remove-modals-processed</code> the first time it runs. The next time that <code>Drupal.attachBehaviors()</code> is called, <code>.once()</code> will find the class and skip.</p>\n\n<h3>Using the context variable in the jQuery selector</h3>\n\n<p>Not using the context variable in jQuery selectors is the source of most of headaches related with debugging buggy JavaScript behaviors. Here is an example where we make use of the context variable in our selector:</p>\n\n<pre>\n  <code>\n/**\n  * Hide menu when Esc is pressed.\n  */\nDrupal.behaviors.syfyGlobalHideMenu = {\n  attach: function (context, settings) {\n    $(document, context).keyup(function (e) {\n      if (e.keyCode == 27) {\n        $('.nav-flyout', context).removeClass('js-flyout-active');\n      }\n    });\n  }\n};\n  </code>\n</pre>\n\n<p>The above approach is simple and effective. jQuery will find the <code>document</code> object in the context variable only the first time that <code>Drupal.attachBehaviors()</code> is called. Note, however, that if you have custom code that calls <code>Drupal.attachBehaviors(document);</code> then the condition will be met and another listener will be bound.</p>\n\n<h3>Going our own way</h3>\n\n<p>Our last alternative is ignoring Drupal's behavior system and simply waiting for the <code>document</code> object to be ready:</p>\n\n<pre>\n  <code>\n/**\n  * Hide menu when Esc is pressed.\n  */\n$(function () {\n  $(document).keyup(function (e) {\n    if (e.keyCode == 27) {\n      $('.nav-flyout').removeClass('js-flyout-active');\n    }\n  });\n});\n  </code>\n</pre>\n\n<p>The above code will work as expected, and If you don't need access to the niceties of Drupal behaviors, it's a perfectly valid approach.</p>\n\n<h2>Conclusion</h2>\n\n<p>The main concept that we should take into account is that Behaviors will be called first when the DOM is loaded, and may be called more times with a context representing new additions or changes to the DOM. Our code has to be crafted so it kicks in only when it is needed.</p>\n\n<p>Did this article spark your curiosity to open a project and navigate through its behaviors? I hope it did. Open a page, dive through each behavior and ask yourself questions like when should this piece of code run? should it run when the DOM is ready or after some AJAX request completes? This mindset will help you to write sharp and efficient JavaScript.</p>\n","format":"filtered_html"},"related_links":[],"topics":[{"_id":"0c85b4af-2b6f-45cc-b7ee-e2f810a0e3e1","_rev":"4-45f41404ce0219d810f15626b9d5fa54","nid":"65","vid":"65","vuuid":"0bdf10c0-e17c-4977-8852-c11915697dfa","type":"topic","title":"Drupal Development","full_slug":{"topics":39,"drupal-development":65},"full_slug_flat":"topics/drupal-development","related_links":[],"slug":"drupal-development","parent":"010ae277-2c0c-479a-8499-5c3dbd3469b8","template":"topic"},{"_id":"f5f94f19-f6c7-4fdb-a6b9-5093900ebefb","_rev":"4-f6042cb6de58c7ca6b148a0869eed898","nid":"67","vid":"67","vuuid":"36b09df3-c375-46f3-a463-78dab9bdba2a","type":"topic","title":"Front-end Development","full_slug":{"topics":39,"frontend-development":67},"full_slug_flat":"topics/frontend-development","related_links":[],"slug":"frontend-development","parent":"010ae277-2c0c-479a-8499-5c3dbd3469b8","template":"topic"}],"authors":[{"_id":"3dca0460-1591-483f-ace6-855109d5f551","_rev":"42-23db446af97a536f4de51b761d8b38e6","nid":"108","vid":"2848","vuuid":"3d4ebd14-9da1-463c-8be2-df769726f657","type":"bio","title":"Juampy NR","full_slug":{"about":1438,"juampy-nr":108},"full_slug_flat":"about/juampy-nr","active":true,"slug":"juampy-nr","parent":"34e0e09c-7246-4b53-ba45-b759a025d235","template":"profile","deck":"Loves optimizing development workflows. Publishes articles, books, and code.","position":"Senior Developer","expertise":["Drupal","CI","Docker","JavaScript","Writing"],"body":{"value":"<p>Young Juampy, though lazy in school, could often be found playing golf. Even though he was good at the sport, he wasn’t in love with it. However, Juampy found a love--for coding--when he started his Computer Engineering &amp; Information Systems Degree at the Universidad Pontificia Comillas in Madrid. For the first time he was eager to go to classes, get good grades, and help his classmates understand the hardest topics.</p>\n\n<p>So Juampy found his passion in coding. He says, “When you do the stuff that you love, it’s like your body and your brain give 100%. They want to help you. You feel that you have more energy, attention and joy than when doing anything else. It’s addictive.”</p>\n\n<p>With Lullabot, Juampy has been instrumental in key projects such as <a href=\"http://www.msnbc.com\">MSNBC</a>’s relaunch. He also helped build a set of Drupal modules for use by various <a href=\"http://www.turner.com\">Turner Broadcasting</a> brands. On top of coding, he loves optimizing development workflows, which involves implementing practices like <a href=\"https://www.lullabot.com/articles/the-peer-review-howto-guide\">peer reviewing</a>, <a href=\"https://www.lullabot.com/articles/why-sticking-to-best-practices-matters\">coding standards</a> and <a href=\"https://www.lullabot.com/articles/an-overview-of-testing-in-drupal-8\">Continuous Integration</a>. He is also a prolific writer, with two books under his belt: <a href=\"https://www.amazon.com/Drush-Users-Guide-ebook/dp/B007SVJ8MA/\">Drush User's Guide</a> and <a href=\"https://www.amazon.com/Drush-Developers-Juampy-Novillo-Requena/dp/1784393789\">Drush for Developers</a>, not to mention numerous articles.</p>\n\n<p>Aside from technology, Juampy enjoys <a href=\"https://www.youtube.com/watch?v=Ed47BswTl54&amp;t=6s\">playing squash</a> and <a href=\"https://www.youtube.com/watch?v=MU3icDMMvtE\">the handpan</a>. He lives in Spain, near the mountains of Madrid.</p>\n","format":"filtered_html"},"quote_text":"Juampy is always looking out for the best way to proceed - process, code quality, looking out for our developer experience. Super knowledgeable, always super positive - I want him on my next project.","quote_cite":"John Keegan, VP Technology Strategy @nbcnews. Digital technology leader @msnbc.","fact":"Juampy plays the Hang, a mystic musical instrument.","time_zone":"Europe/Madrid","location":"Madrid, Spain","promos":["msnbc"],"links":{"drupalorg":"juampynr","dribbble":"","facebook":"","flickr":"","github":"juampynr","googlePlus":"","lanyrd":"","linkedIn":"in/juampynr","twitter":"juampynr"},"external":[{"url":"http://www.amazon.com/Developers-Edition-Juampy-Novillo-Requena/dp/1784393789","title":"Drush for Developers","type":"book","source":"Packt Publishing"},{"url":"https://drupalwatchdog.com/volume-4/issue-2/protecting-your-drupal-8-resources","title":"Protecting Your Drupal 8 Resources","type":"article","source":"Drupal Watchdog"},{"url":"http://www.amazon.com/Drush-Users-Guide-Requena-Novillo/dp/1849517983","title":"Drush User's Guide","type":"book","source":"Packt Publishing"}],"image":{"fid":"4591","uri":"bios/headshots-comp.jpg","mime":"image/jpeg","alt":"","caption":"","title":""},"hero_image":{"fid":"4372","uri":"juampy_bio_image.jpeg","mime":"image/jpeg","alt":"Beautiful landscape in Spain.","caption":"","title":""},"hero_image_invert":true,"map":{"fid":"3013","uri":"maps/map_juampy-opt.svg","mime":"image/svg+xml","alt":"","caption":"","title":"","contents":"<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 57.1 50.1\" enable-background=\"new 0 0 57.1 50.1\" xml:space=\"preserve\"><path d=\"M13.7 50.1c-0.5 0-0.9-0.2-1.3-0.4l-1.3-1c-0.4-0.3-0.7-0.8-0.8-1.3l-0.5-2.9L8.1 42H7.4 c-0.7 0-1.4-0.4-1.8-1s-0.4-1.4 0-2l1.5-2.8c-0.7-0.4-1.2-1.1-1.2-1.9v-1.4c0-0.7 0.3-1.3 0.9-1.7l1.4-1H8.1c-0.4 0-0.8-0.3-0.9-0.6 l-0.6-1.5c-0.2-0.6-0.2-1.3 0.2-1.9c0.4-0.6 1-0.9 1.7-0.9H9l0.1-3.9c0-0.6 0.2-1.1 0.6-1.5l3.6-3.6L12.9 16 c-0.7-0.4-1.1-1.1-1.1-1.8v-0.7l-1.3-0.7l-1.1 0.6c-0.5 0.3-1.1 0.4-1.7 0.2L6 12.9c-0.2-0.1-0.4-0.2-0.6-0.3l-1-0.7H3.2 c-0.6 0-1.1-0.2-1.5-0.7c-0.4-0.4-0.6-1-0.5-1.6l0.2-2.2L0.3 5.6c-0.4-0.7-0.4-1.5 0.1-2.2L1 2.5c0.4-0.6 1-0.9 1.7-0.9h2.2l1.3-1.1 C6.5 0.2 7 0 7.5 0h1.3c0.5 0 1 0.2 1.3 0.5l1 0.8h4.8c0.3 0 0.6 0.1 0.8 0.2l5.8 2.6L26 3.6c0.2 0 0.5 0 0.7 0L34 4.8 c0.4 0.1 0.7 0.2 1 0.5l3.5 3l5.5 2.1c0.1-0.5 0.5-0.8 1-0.8h0.9c0.8 0 1.6 0.5 1.9 1.2l0.7 1.5h0.9c0 0 0.1 0 0.2 0h2l2.6-1.1 c0.3-0.1 0.5-0.2 0.8-0.2c1.1 0 2.1 0.9 2.1 2.1v1.2c0 0.5-0.2 1-0.6 1.4L53 19.3c-0.3 0.3-0.7 0.5-1.1 0.6l-5.8 1v1.5 c0 0.5-0.2 0.9-0.4 1.3l-4.6 5.8v2.1l1.4 1.4c0.5 0.4 0.7 1.1 0.6 1.7c-0.1 0.7-0.4 1.2-1 1.5l-2 1.2l-1.3 3.9 c-0.2 0.6-0.7 1.1-1.2 1.3l-2.7 1l-1.8 2.8c-0.5 0.7-1.3 1.1-2.2 0.9l-2.2-0.5h-4.4l-7.6 1.5L15 49.6C14.7 49.9 14.2 50.1 13.7 50.1 z M8.8 28.1h0.5c0.6 0 1 0.4 1 1V30c0 0.7-0.3 1.3-0.9 1.7L8 32.8v1.5c0.5 0.3 0.9 0.7 1.1 1.3c0.2 0.5 0.1 1.1-0.1 1.6L7.5 40 l-0.1 0h0.7c0.7 0 1.3 0.3 1.7 0.9l1.6 2.5c0.2 0.2 0.3 0.5 0.3 0.8l0.5 2.9l1.4 1.1l0 0l1.5-1.4c0.3-0.3 0.6-0.4 1-0.5l7.6-1.5 c0.1 0 0.3 0 0.4 0h4.3c0.2 0 0.3 0 0.4 0l2.2 0.5l1.8-2.8c0.2-0.4 0.6-0.7 1-0.8l2.7-1l1.3-3.9c0.2-0.5 0.5-0.9 0.9-1.1l2-1.2 L39.5 33c-0.4-0.4-0.7-0.9-0.7-1.5v-2c0-0.5 0.2-0.9 0.4-1.3l4.6-5.8v-1.5c0-1 0.7-1.9 1.7-2l5.8-1l3.5-3.6V13l-0.5-1l0.4 0.9 L52.1 14c-0.3 0.1-0.5 0.2-0.8 0.2h-2l-0.9 0.1c0 0-0.1 0-0.2 0c-0.8 0-1.6-0.5-1.9-1.2l-0.6-1.4v0.2c0 0.3-0.2 0.6-0.4 0.8 c-0.3 0.2-0.6 0.2-0.9 0.1l-6.8-2.7C37.4 10 37.2 9.9 37 9.8l-3.5-3l-7.3-1.2l-3.4 0.6c-0.4 0.1-0.8 0-1.2-0.2l-5.8-2.6H11 c-0.5 0-0.9-0.2-1.3-0.5L8.8 2H7.5L6.2 3.1C5.8 3.4 5.3 3.6 4.9 3.6H2.7L2 4.5l1.1 2c0.2 0.4 0.3 0.8 0.3 1.2L3.2 9.8l1.2 0.1 c0.4 0 0.9 0.1 1.2 0.4l1 0.7l1.7 0.6L9.4 11c0.6-0.4 1.4-0.4 2-0.1l1.2 0.6c0.7 0.4 1.1 1.1 1.1 1.8V14l0.4 0.3 c0.6 0.3 1 0.9 1.1 1.5c0.1 0.7-0.1 1.3-0.6 1.8L11 21.2v3.9c0 1.1-0.9 2.1-2.1 2.1H8.5L8.8 28.1z M27.2 28.7 c-0.3 0-0.5-0.1-0.7-0.3c-0.7-0.7-6.5-6.9-6.5-10.6c0-4 3.2-7.2 7.2-7.2s7.2 3.2 7.2 7.2c0 3.7-5.8 9.9-6.5 10.6 C27.7 28.6 27.5 28.7 27.2 28.7z M27.2 12.6c-2.9 0-5.2 2.3-5.2 5.2c0 2 2.9 5.9 5.2 8.4c2.3-2.5 5.2-6.5 5.2-8.4 C32.4 14.9 30.1 12.6 27.2 12.6z M27.2 20.9c-1.9 0-3.4-1.5-3.4-3.4s1.5-3.4 3.4-3.4s3.4 1.5 3.4 3.4S29.1 20.9 27.2 20.9z M27.2 16 c-0.8 0-1.4 0.6-1.4 1.4s0.6 1.4 1.4 1.4s1.4-0.6 1.4-1.4S28 16 27.2 16z\"/><g></g><g></g><g></g><g></g><g></g><g></g></svg>"}}],"drupal_planet":false,"slug":"understanding-javascript-behaviors-in-drupal","parent":"b3fe0945-ae8e-4763-b558-0418c3ee33a6","assets":{"2332":{"fid":"2332","uri":"assets/2015-09/attach.png","mime":"image/png","alt":"Google Chrome Debugging Console","caption":"","title":""},"2333":{"fid":"2333","uri":"assets/2015-09/debugger.png","mime":"image/png","alt":"Debugger started","caption":"","title":""},"2334":{"fid":"2334","uri":"assets/2015-09/variables.png","mime":"image/png","alt":"Scope Variables Panel","caption":"","title":""},"2335":{"fid":"2335","uri":"assets/2015-09/load_more.png","mime":"image/png","alt":"Load More Button","caption":"","title":""},"2336":{"fid":"2336","uri":"assets/2015-09/context_aha.png","mime":"image/png","alt":"Gotta love context","caption":"","title":""},"2337":{"fid":"2337","uri":"assets/2015-09/menu.png","mime":"image/png","alt":"Syfy&#039;s menu expanded","caption":"","title":""}},"hero_image":{"fid":"3109","uri":"hero-article-fpo.png","mime":"image/png","alt":"Crying baby","caption":"","title":""},"hero_image_invert":false,"template":"article","_additionalData":{}}</script> <script>_abTest = 1; </script> <script>function loadCSS(e,n,o,t){"use strict";var d=window.document.createElement("link"),s=n||window.document.getElementsByTagName("script")[0],i=window.document.styleSheets;return d.rel="stylesheet",d.href=e,d.media="only x",t&&(d.onload=t),s.parentNode.insertBefore(d,s),d.onloadcssdefined=function(e){for(var n,o=0;o<i.length;o++)i[o].href&&i[o].href===d.href&&(n=!0);n?e():setTimeout(function(){d.onloadcssdefined(e)})},d.onloadcssdefined(function(){d.media=o||"all"}),d}loadCSS("/build/rev/style.b412e049384e.css");</script><noscript>&lt;link href="/build/rev/style.b412e049384e.css" rel="stylesheet"&gt;</noscript>  <!--[if IE 9]>
      <script src="//cdn.rawgit.com/jpillora/xdomain/0.7.3/dist/xdomain.min.js" slave="https://api.lullabot.com:443/proxy.html"></script>
    <![endif]-->  <!--[if IE 9]>
    <script>
      !function(){for(var n=0,i=["ms","moz","webkit","o"],e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(i){var e=(new Date).getTime(),a=Math.max(0,16-(e-n)),o=window.setTimeout(function(){i(e+a)},a);return n=e+a,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}();
    </script>
    <![endif]--> <script type="text/javascript" async="" src="./Understanding JavaScript behaviors in Drupal _ Lullabot_files/embed.js"></script><link rel="preload" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.d49f53e192b9080ef8880a7c9b24f1c3.css"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.9fa8958b421fb4fe8932a2bbb1e656d5.js"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.0687f63ad0515694420458c2bd48d53b.js"><link rel="preload" as="script" href="https://disqus.com/next/config.js"><script src="./Understanding JavaScript behaviors in Drupal _ Lullabot_files/alfalfa_min.d078e4f2a4721192a99e02601a767617.js" async="" charset="UTF-8"></script></head> <body class="ab-test--1 body--fonts-loaded"> <div id="root" class="u-layout-page"><div class="layout-article old-typography" itemscope="" itemtype="http://schema.org/Article" data-reactid=".1sdw0d9oaew" data-react-checksum="-659916031"><div class="layout-article__inner" data-reactid=".1sdw0d9oaew.0"><nav class="navigation is-visible has-crumb" data-reactid=".1sdw0d9oaew.0.0"><div class="navigation__header" data-reactid=".1sdw0d9oaew.0.0.0"><h1 class="site-name" data-reactid=".1sdw0d9oaew.0.0.0.1"><a class="link" href="https://www.lullabot.com/" data-reactid=".1sdw0d9oaew.0.0.0.1.0"><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.0.0.1.0.0"><svg class="icon icon--lullabot-logo-wordmark" role="img" title="Lullabot" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/misc.dc8839b68a98.svg#icon-lullabot-logo-wordmark"></use></svg></span></a></h1><div class="navigation__search" data-reactid=".1sdw0d9oaew.0.0.0.2"><form action="https://www.lullabot.com/search" data-reactid=".1sdw0d9oaew.0.0.0.2.0"><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.0.0.2.0.0"><svg class="icon icon--search" role="img" title="Search" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/interactive.8b7552efc9d5.svg#icon-search"></use></svg></span><input class="navigation__search-input" name="q" placeholder="Search" type="text" data-reactid=".1sdw0d9oaew.0.0.0.2.0.1"><input style="display:none;" type="submit" data-reactid=".1sdw0d9oaew.0.0.0.2.0.2"></form></div><div class="navigation__branding" data-reactid=".1sdw0d9oaew.0.0.0.3"><div class="navigation__crumb" data-reactid=".1sdw0d9oaew.0.0.0.3.0"><a class="link" href="https://www.lullabot.com/articles" data-reactid=".1sdw0d9oaew.0.0.0.3.0.0">See all articles</a></div><a href="https://www.lullabot.com/articles/understanding-javascript-behaviors-in-drupal#/" data-reactid=".1sdw0d9oaew.0.0.0.3.1"><span class="navigation__icon" data-reactid=".1sdw0d9oaew.0.0.0.3.1.0"><span class="navigation__icon__label" data-reactid=".1sdw0d9oaew.0.0.0.3.1.0.0">Menu</span><span class="navigation__icon__line" data-reactid=".1sdw0d9oaew.0.0.0.3.1.0.1"></span></span></a></div></div><div class="navigation__main" data-reactid=".1sdw0d9oaew.0.0.1"><ul class="navigation__primary-menu" itemscope="" itemtype="http://www.schema.org/SiteNavigationElement" data-reactid=".1sdw0d9oaew.0.0.1.0"><li class="navigation__primary-menu__item" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$Our Work"><a class="link" href="https://www.lullabot.com/our-work" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$Our Work.0">Our Work</a></li><li class="navigation__primary-menu__item" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$Services"><a class="link" href="https://www.lullabot.com/services" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$Services.0">Services</a></li><li class="navigation__primary-menu__item" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$Articles"><a class="link" href="https://www.lullabot.com/articles" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$Articles.0">Articles</a></li><li class="navigation__primary-menu__item" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$Podcasts"><a class="link" href="https://www.lullabot.com/podcasts" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$Podcasts.0">Podcasts</a></li><li class="navigation__primary-menu__item" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$About"><a class="link" href="https://www.lullabot.com/about" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$About.0">About</a></li><li class="navigation__primary-menu__item" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$Contact"><a class="link" href="https://www.lullabot.com/contact" data-reactid=".1sdw0d9oaew.0.0.1.0.0:$Contact.0">Contact</a></li></ul><div class="navigation__ctas" data-reactid=".1sdw0d9oaew.0.0.1.1"><span class="navigation__ctas__cta" data-reactid=".1sdw0d9oaew.0.0.1.1.0"><a class="link" href="https://www.lullabot.com/jobs" data-reactid=".1sdw0d9oaew.0.0.1.1.0.0">Jobs</a></span><span class="navigation__ctas__cta" data-reactid=".1sdw0d9oaew.0.0.1.1.1"><a class="link" href="https://www.lullabot.com/clients" data-reactid=".1sdw0d9oaew.0.0.1.1.1.0">Clients</a></span></div><div class="navigation__social-links" data-reactid=".1sdw0d9oaew.0.0.1.2"><ul class="social-links" data-reactid=".1sdw0d9oaew.0.0.1.2.0"><li class="social-links__item" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$facebook"><a class="link" href="https://facebook.com/lullabots" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$facebook.0"><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$facebook.0.0"><svg class="icon icon--facebook" role="img" title="Lullabot on Facebook" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/social.ebe784fe5271.svg#icon-facebook"></use></svg></span></a></li><li class="social-links__item" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$twitter"><a class="link" href="https://twitter.com/lullabot" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$twitter.0"><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$twitter.0.0"><svg class="icon icon--twitter" role="img" title="Lullabot on Twitter" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/social.ebe784fe5271.svg#icon-twitter"></use></svg></span></a></li><li class="social-links__item" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$googleplus"><a class="link" href="https://plus.google.com/+lullabot" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$googleplus.0"><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$googleplus.0.0"><svg class="icon icon--googleplus" role="img" title="Lullabot on Google Plus" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/social.ebe784fe5271.svg#icon-googleplus"></use></svg></span></a></li><li class="social-links__item" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$dribbble"><a class="link" href="https://dribbble.com/lullabot" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$dribbble.0"><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$dribbble.0.0"><svg class="icon icon--dribbble" role="img" title="Lullabot on Dribbble" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/social.ebe784fe5271.svg#icon-dribbble"></use></svg></span></a></li><li class="social-links__item" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$github"><a class="link" href="https://github.com/Lullabot" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$github.0"><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$github.0.0"><svg class="icon icon--github" role="img" title="Lullabot on GitHub" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/social.ebe784fe5271.svg#icon-github"></use></svg></span></a></li><li class="social-links__item" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$rss"><a class="link" href="https://www.lullabot.com/articles/rss/feed" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$rss.0"><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.0.1.2.0.$rss.0.0"><svg class="icon icon--rss" role="img" title="Lullabot&#39;s RSS Feed" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/misc.dc8839b68a98.svg#icon-rss"></use></svg></span></a></li></ul></div><div class="navigation__dme-promo" data-reactid=".1sdw0d9oaew.0.0.1.3"><span class="navigation__dme-promo__label" data-reactid=".1sdw0d9oaew.0.0.1.3.0">We also created</span><a class="link" href="https://drupalize.me/" data-reactid=".1sdw0d9oaew.0.0.1.3.1"><span data-reactid=".1sdw0d9oaew.0.0.1.3.1.0">Drupalize.Me</span><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.0.1.3.1.1"><svg class="icon icon--arrow-right" role="img" title="Drupalize.Me" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/interactive.8b7552efc9d5.svg#icon-arrow-right"></use></svg></span></a></div></div></nav><article class="layout-article__article" data-reactid=".1sdw0d9oaew.0.1"><header class="layout-article__article-hero" data-reactid=".1sdw0d9oaew.0.1.0"><div class="article-hero article-hero--background" data-reactid=".1sdw0d9oaew.0.1.0.0"><div class="cover-image cover-image--with-image cover-image--with-gradient" data-reactid=".1sdw0d9oaew.0.1.0.0.0"><style data-reactid=".1sdw0d9oaew.0.1.0.0.0.0">.article-hero .cover-image {background-image: url("https://assets.lullabot.com/styles/dynamic_resize/w960/hero-article-fpo.png");}@media (min-width: 40em) {.article-hero .cover-image {background-image: url("https://assets.lullabot.com/styles/dynamic_resize/w1920/hero-article-fpo.png");}}@media (min-width: 80em) {.article-hero .cover-image {background-image: url("https://assets.lullabot.com/styles/dynamic_resize/w2430/hero-article-fpo.png");}}</style><div class="cover-image__content" data-reactid=".1sdw0d9oaew.0.1.0.0.0.1"><div class="u-layout-full-width-copy-container" data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.0"><div class="article-hero__content" data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.0.0"><h1 class="article-hero__title" itemprop="name" data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.0.0.0">Understanding JavaScript behaviors in Drupal</h1><div class="article-hero__meta" data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.0.0.1"><span class="article-hero__author" data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.0.0.1.0"><span data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.0.0.1.0.0">by </span><span data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.0.0.1.0.1:$Juampy NR"><a class="link" href="https://www.lullabot.com/about/juampy-nr" data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.0.0.1.0.1:$Juampy NR.0">Juampy NR</a></span></span><span class="article-hero__date" itemprop="datePublished" data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.0.0.1.1">February 3, 2015</span></div></div></div><a class="push-arrow" href="https://www.lullabot.com/articles/understanding-javascript-behaviors-in-drupal#content" data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.1"><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.1.0.0.0.1.1.1"><svg class="icon icon--arrow-down" role="img" title="View content" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/interactive.8b7552efc9d5.svg#icon-arrow-down"></use></svg></span></a></div></div></div></header><div class="layout-article__article-content" id="content" itemprop="articleBody" data-reactid=".1sdw0d9oaew.0.1.1"><div class="layout-article__article-content-lead" data-reactid=".1sdw0d9oaew.0.1.1.0"><div class="rich-text" data-reactid=".1sdw0d9oaew.0.1.1.0.0"><div class="rich-text__content"><p>﻿I can barely remember the first time I added JavaScript to a Drupal page using a custom module. I'm sure looked at the documentation, took the example snippet, tweaked it, tested it, and moved on to something else. It was only later, using a debugger, that I saw how Drupal's "behavior" system worked and realized that my code was not being executed as I expected.</p></div></div></div><aside class="layout-article__series" data-reactid=".1sdw0d9oaew.0.1.1.1"><noscript data-reactid=".1sdw0d9oaew.0.1.1.1.0"></noscript></aside><div class="layout-article__article-content-body" data-reactid=".1sdw0d9oaew.0.1.1.2"><div class="rich-text" data-reactid=".1sdw0d9oaew.0.1.1.2.0"><div class="rich-text__content">
<p>In this article, we'll cover the key facts about Drupal behaviors, then look at a real Drupal project to inspect its behaviors and optimize them.</p>

<h2>Unraveling Drupal behaviors</h2>

<p><a href="https://www.drupal.org/node/756722">Drupal’s official JavaScript</a> documentation suggests that modules should implement JavaScript by attaching logic to <code>Drupal.behaviors</code>. Here is an example taken from that page:</p>

<div class="code" style="margin-bottom: 24px;"><pre style="margin-bottom: 24px;"><code>
Drupal.behaviors.exampleModule = {
  attach: function (context, settings) {
    $('.example', context).click(function () {
      $(this).next('ul').toggle('show');
    });
  }
};
  </code></pre></div>

<p>Drupal core will call attached behaviors when the <a href="http://en.wikipedia.org/wiki/Document_Object_Model">DOM</a> (the object representation of the HTML) is fully loaded, passing in two arguments:</p>

<ul style="margin-bottom: 35px;"><li>context: which contains the DOM.</li>
	<li>settings: which contains all the settings injected server side.</li>
</ul>

<p>We can confirm this at the following snippet extracted from Drupal core’s <code>misc/drupal.js</code>:</p>

<div class="code" style="margin-bottom: 0px;"><pre style="margin-bottom: 0px;"><code>
// Attach all behaviors.
$(function () {
  Drupal.attachBehaviors(document, Drupal.settings);
});
  </code></pre></div>

<p><em>NOTE: <code>$(function ()</code> is a shorthand for <code>$(document).ready()</code>. See <a href="http://api.jquery.com/ready">http://api.jquery.com/ready</a> for further details.</em></p>

<p>Now here is the point where I had that “aha!” moment the first time I watched the code execute in a debugger: <code>Drupal.attachBehaviors()</code> may be called more times under different circumstances after the DOM is loaded. For instance, Drupal core will also call <code>Drupal.attachBehaviors()</code> in these scenarios:</p>

<ul style="margin-bottom: 35px;"><li>After an administration overlay has been loaded into the page.</li>
	<li>After the <a href="https://www.drupal.org/node/752056">AJAX Form API</a> has submitted a form.</li>
	<li>When an AJAX request returns a command that modifies the HTML, such as <a href="https://api.drupal.org/api/drupal/includes%21ajax.inc/function/ajax_command_replace/7">ajax_command_replace()</a>.</li>
</ul>

<p>Furthermore, modules may call <code>Drupal.attachBehaviors()</code> as well. Here are some examples:</p>

<ul style="margin-bottom: 35px;"><li>CTools calls it after a modal has been loaded.</li>
	<li>Media calls it after the media browser has been loaded.</li>
	<li>Panels calls it after in-place editing has been completed.</li>
	<li>Views calls it after loading a new page that uses AJAX.</li>
	<li>Views Load More calls it after loading the next chunk of items.</li>
	<li>JavaScript from custom modules may call <code>Drupal.attachBehaviors()</code> when they add or change parts of the page.</li>
</ul>

<p>The first time that <code>Drupal.attachBehaviors()</code> is called, the <code>context</code> variable contains the <code>document</code> object representing the DOM, but for the rest of the calls <code>context</code> will hold the affected piece of HTML. This is often overlooked by developers, leading to inefficient code that either causes tricky bugs or stresses the browser.</p>

<p>How can we make sure that existing Drupal behaviors take this into account? In the following section we will debug and analyze them in a real Drupal project.</p>

<h2>Navigating through Drupal behaviors</h2>

<p>While working on a Drupal project, I like to open a page and debug which behaviors are executed to make sure that they are efficient. I set a breakpoint at <code>Drupal.attachBehaviors()</code>, then open a page and follow the code of each behavior to see what it is doing.</p>

<p>Let’s take the <a href="http://www.syfy.com/">Syfy</a> project as an example, where Lullabot helped with its redesign and launch. Using <a href="https://developer.chrome.com/devtools">Google Chrome Developer Tools</a>, we will open Syfy’s homepage and set a breakpoint at the following line of core’s <code>misc/drupal.js</code>:</p>

</div><div class="rich-text__embed" style="margin-bottom: 13.125px;"><div class="rich-text__picture rich-text__picture--medium rich-text__picture--with-border" style="margin-bottom: 48.125px;"><picture class="picture"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/attach.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/attach.png 2x" media="(min-width: 101.25em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/attach.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/attach.png 2x" media="(min-width: 80em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/attach.png, https://assets.lullabot.com/styles/dynamic_resize/w2560/assets/2015-09/attach.png 2x" media="(min-width: 40em)"><img srcset="https://assets.lullabot.com/styles/dynamic_resize/w640/assets/2015-09/attach.png, https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/attach.png 2x" alt="Google Chrome Debugging Console"></picture></div></div><div class="rich-text__content">

<p>After reloading the page, the debugger will kick in and stop code execution—waiting for us to make a decision on what to do:</p>

</div><div class="rich-text__embed" style="margin-bottom: 26.125px;"><div class="rich-text__picture rich-text__picture--medium rich-text__picture--with-border" style="margin-bottom: 26.125px;"><picture class="picture"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/debugger.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/debugger.png 2x" media="(min-width: 101.25em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/debugger.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/debugger.png 2x" media="(min-width: 80em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/debugger.png, https://assets.lullabot.com/styles/dynamic_resize/w2560/assets/2015-09/debugger.png 2x" media="(min-width: 40em)"><img srcset="https://assets.lullabot.com/styles/dynamic_resize/w640/assets/2015-09/debugger.png, https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/debugger.png 2x" alt="Debugger started"></picture></div></div><div class="rich-text__content">

<p>If you do not have experience using a debugger, have a look at the <a href="https://developer.chrome.com/devtools/docs/javascript-debugging">Debugging JavaScript</a> section for Google Chrome. A debugger lets you follow the code step by step inspecting the current variables and letting you write statements against the current context.</p>

<p>We said before that "Drupal will call all attached behaviors when the DOM is fully loaded, passing as arguments the DOM and all the settings injected server side.” Let’s verify this in the debugger. Here we can see the <code>context</code> and <code>settings</code> variables at the <code>Scope Variables</code> panel:</p>

</div><div class="rich-text__embed" style="margin-bottom: 14.625px;"><div class="rich-text__picture rich-text__picture--medium rich-text__picture--with-border" style="margin-bottom: 49.625px;"><picture class="picture"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/variables.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/variables.png 2x" media="(min-width: 101.25em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/variables.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/variables.png 2x" media="(min-width: 80em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/variables.png, https://assets.lullabot.com/styles/dynamic_resize/w2560/assets/2015-09/variables.png 2x" media="(min-width: 40em)"><img srcset="https://assets.lullabot.com/styles/dynamic_resize/w640/assets/2015-09/variables.png, https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/variables.png 2x" alt="Scope Variables Panel"></picture></div></div><div class="rich-text__content">

<p>Most custom behaviors are to be executed just once, so on this first loop things are normally fine. The tricky bit comes later, once all behaviors have been processed and something calls <code>Drupal.attachBehaviors()</code> again. Let’s see an example.</p>

<h2>Testing behaviors on subsequent calls</h2>

<p>Syfy’s homepage has a View of tiles that uses Views Load More module to load extra items at the bottom. We will now scroll down and click on Load More to see what happens:</p>

</div><div class="rich-text__embed" style="margin-bottom: 5.73438px;"><div class="rich-text__picture rich-text__picture--medium rich-text__picture--with-border" style="margin-bottom: 40.7344px;"><picture class="picture"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/load_more.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/load_more.png 2x" media="(min-width: 101.25em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/load_more.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/load_more.png 2x" media="(min-width: 80em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/load_more.png, https://assets.lullabot.com/styles/dynamic_resize/w2560/assets/2015-09/load_more.png 2x" media="(min-width: 40em)"><img srcset="https://assets.lullabot.com/styles/dynamic_resize/w640/assets/2015-09/load_more.png, https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/load_more.png 2x" alt="Load More Button"></picture></div></div><div class="rich-text__content">

<p>Drupal calls <code>/views/ajax</code> to load the next list of tiles and once it has appended them to the DOM, it executes <code>Drupal.attachBehaviors()</code> with a subtle difference that we can discover when we inspect its variables in the debugger:</p>

</div><div class="rich-text__embed" style="margin-bottom: 23.3594px;"><div class="rich-text__picture rich-text__picture--medium rich-text__picture--with-border" style="margin-bottom: 23.3594px;"><picture class="picture"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/context_aha.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/context_aha.png 2x" media="(min-width: 101.25em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/context_aha.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/context_aha.png 2x" media="(min-width: 80em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/context_aha.png, https://assets.lullabot.com/styles/dynamic_resize/w2560/assets/2015-09/context_aha.png 2x" media="(min-width: 40em)"><img srcset="https://assets.lullabot.com/styles/dynamic_resize/w640/assets/2015-09/context_aha.png, https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/context_aha.png 2x" alt="Gotta love context"></picture></div></div><div class="rich-text__content">

<p>The <code>context</code> variable does not contain the full HTML document but the updated view. This difference is huge. Drupal behaviors that take the <code>context</code> variable into account when selecting portions of the DOM such as <code>$('#some-id', context)</code> will be quickly skipped since they won’t find what they are looking for. Unfortunately, it is a common mistake to overlook this and not use the <code>context</code> variable in jQuery selectors. Here is a behavior that I found while debugging behaviors in this second loop:</p>

<div class="code" style="margin-bottom: 29px;"><pre style="margin-bottom: 29px;"><code>
/**
  * Hide menu when Esc is pressed.
  */
Drupal.behaviors.syfyGlobalHideMenu = {
  attach: function (context, settings) {
    $(document).keyup(function (e) {
      if (e.keyCode == 27) {
        $('.nav-flyout', context).removeClass('js-flyout-active');
      }
    });
  }
};
  </code></pre></div>

<p>It sets a listener at the <code>document</code> level to check if the pressed key was Esc in order to gracefully hide the main menu, which is expanded in the following screenshot:</p>

</div><div class="rich-text__embed" style="margin-bottom: 23.2188px;"><div class="rich-text__picture rich-text__picture--medium rich-text__picture--with-border" style="margin-bottom: 23.2188px;"><picture class="picture"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/menu.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/menu.png 2x" media="(min-width: 101.25em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1620/assets/2015-09/menu.png, https://assets.lullabot.com/styles/dynamic_resize/w3240/assets/2015-09/menu.png 2x" media="(min-width: 80em)"><source srcset="https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/menu.png, https://assets.lullabot.com/styles/dynamic_resize/w2560/assets/2015-09/menu.png 2x" media="(min-width: 40em)"><img srcset="https://assets.lullabot.com/styles/dynamic_resize/w640/assets/2015-09/menu.png, https://assets.lullabot.com/styles/dynamic_resize/w1280/assets/2015-09/menu.png 2x" alt="Syfy&#39;s menu expanded"></picture></div></div><div class="rich-text__content">

<p>What is the problem here? It uses the <code>context</code> variable to find the menu at <code>$('.nav-flyout', context)</code>, but it does not use <code>context</code> when it sets the keyup listener at <code>$(document).keyup(function(e)</code>. This means that every time Drupal behaviors are processed, it will add a new <code>keyup</code> listener.</p>

<h2>Making behaviors behave</h2>

<p>There are a few ways to fix the above behavior so it sets a listener just once. Let’s see each of them and alter the above behavior accordingly. Here they are.</p>

<h3>Using jQuery Once</h3>

<p>This is the recommended approach at the <a href="https://www.drupal.org/node/756722#jquery-once">Drupal.org JavaScript documentation</a>. jQuery Once makes sure that something is processed just one time by adding a class on a DOM element after the code has run.</p>

<div class="code" style="margin-bottom: 10px;"><pre style="margin-bottom: 10px;"><code>
/**
  * Hide menu when Esc is pressed.
  */
Drupal.behaviors.syfyGlobalHideMenu = {
  attach: function (context, settings) {
    $('.nav-flyout', context).once('remove-modals', function () {
      $(document).keyup(function (e) {
        if (e.keyCode == 27) {
          $('.nav-flyout', context).removeClass('js-flyout-active');
        }
      });
    });
  }
};
  </code></pre></div>

<p>The above code will add a class <code>remove-modals-processed</code> the first time it runs. The next time that <code>Drupal.attachBehaviors()</code> is called, <code>.once()</code> will find the class and skip.</p>

<h3>Using the context variable in the jQuery selector</h3>

<p>Not using the context variable in jQuery selectors is the source of most of headaches related with debugging buggy JavaScript behaviors. Here is an example where we make use of the context variable in our selector:</p>

<div class="code" style="margin-bottom: 29px;"><pre style="margin-bottom: 29px;"><code>
/**
  * Hide menu when Esc is pressed.
  */
Drupal.behaviors.syfyGlobalHideMenu = {
  attach: function (context, settings) {
    $(document, context).keyup(function (e) {
      if (e.keyCode == 27) {
        $('.nav-flyout', context).removeClass('js-flyout-active');
      }
    });
  }
};
  </code></pre></div>

<p>The above approach is simple and effective. jQuery will find the <code>document</code> object in the context variable only the first time that <code>Drupal.attachBehaviors()</code> is called. Note, however, that if you have custom code that calls <code>Drupal.attachBehaviors(document);</code> then the condition will be met and another listener will be bound.</p>

<h3>Going our own way</h3>

<p>Our last alternative is ignoring Drupal's behavior system and simply waiting for the <code>document</code> object to be ready:</p>

<div class="code" style="margin-bottom: 13px;"><pre style="margin-bottom: 13px;"><code>
/**
  * Hide menu when Esc is pressed.
  */
$(function () {
  $(document).keyup(function (e) {
    if (e.keyCode == 27) {
      $('.nav-flyout').removeClass('js-flyout-active');
    }
  });
});
  </code></pre></div>

<p>The above code will work as expected, and If you don't need access to the niceties of Drupal behaviors, it's a perfectly valid approach.</p>

</div></div><div data-reactid=".1sdw0d9oaew.0.1.1.2.1"><aside class="layout-article__article-content-promo" data-reactid=".1sdw0d9oaew.0.1.1.2.1.0"></aside><div class="rich-text" data-reactid=".1sdw0d9oaew.0.1.1.2.1.1"><div class="rich-text__content"><h2>Conclusion</h2>

<p>The main concept that we should take into account is that Behaviors will be called first when the DOM is loaded, and may be called more times with a context representing new additions or changes to the DOM. Our code has to be crafted so it kicks in only when it is needed.</p>

<p>Did this article spark your curiosity to open a project and navigate through its behaviors? I hope it did. Open a page, dive through each behavior and ask yourself questions like when should this piece of code run? should it run when the DOM is ready or after some AJAX request completes? This mindset will help you to write sharp and efficient JavaScript.</p>
</div></div></div></div></div><footer class="u-layout-full-width-copy-container" data-reactid=".1sdw0d9oaew.0.1.2"><div class="layout-article__article-topics" itemprop="keywords" data-reactid=".1sdw0d9oaew.0.1.2.0"><div class="topic-list" data-reactid=".1sdw0d9oaew.0.1.2.0.0"><h2 class="topic-list__title" data-reactid=".1sdw0d9oaew.0.1.2.0.0.0"><span data-reactid=".1sdw0d9oaew.0.1.2.0.0.0.0">Published</span><span data-reactid=".1sdw0d9oaew.0.1.2.0.0.0.1"> </span><div class="topic-list__title__dashed" data-reactid=".1sdw0d9oaew.0.1.2.0.0.0.2"><span data-reactid=".1sdw0d9oaew.0.1.2.0.0.0.2.0">in</span></div></h2><ul data-reactid=".1sdw0d9oaew.0.1.2.0.0.1"><li data-reactid=".1sdw0d9oaew.0.1.2.0.0.1.$Drupal Development"><a class="link" href="https://www.lullabot.com/topics/drupal-development" data-reactid=".1sdw0d9oaew.0.1.2.0.0.1.$Drupal Development.0">Drupal Development</a></li><li data-reactid=".1sdw0d9oaew.0.1.2.0.0.1.$Front-end Development"><a class="link" href="https://www.lullabot.com/topics/frontend-development" data-reactid=".1sdw0d9oaew.0.1.2.0.0.1.$Front-end Development.0">Front-end Development</a></li></ul></div></div><div class="layout-article__article-authors" data-reactid=".1sdw0d9oaew.0.1.2.2"><div class="author author--active" itemprop="author" itemscope="" itemtype="http://schema.org/Person" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551"><div class="author__image" itemprop="image" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.0"><a class="link" href="https://www.lullabot.com/about/juampy-nr" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.0.0"><picture class="picture" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.0.0.0"><!--[if IE 9]><video style="display: none;"><![endif]--><!--[if IE 9]></video><![endif]--><img srcset="https://assets.lullabot.com/styles/dynamic_resize/w88-h88/bios/headshots-comp.jpg, https://assets.lullabot.com/styles/dynamic_resize/w172-h172/bios/headshots-comp.jpg 2x" alt="Juampy NR"></picture></a></div><div class="author__content" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1"><div class="author__headline" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.0"><span data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.0.0">About the author</span><span data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.0.1">, </span><span itemprop="name" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.0.2">Juampy NR</span></div><div class="author__bio" itemprop="disambiguatingDescription" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.1">Loves optimizing development workflows. Publishes articles, books, and code.</div><div class="author__link" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.2"><a class="link" href="https://www.lullabot.com/about/juampy-nr" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.2.0"><span data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.2.0.1"><span data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.2.0.1.0">See more articles by </span><span data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.2.0.1.1">Juampy</span></span><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.1.2.2.$3dca0460-1591-483f-ace6-855109d5f551.1.2.0.2"><svg class="icon icon--arrow-right" role="img" title="" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/interactive.8b7552efc9d5.svg#icon-arrow-right"></use></svg></span></a></div></div></div></div></footer></article><div class="u-layout-full-width-copy-container" data-reactid=".1sdw0d9oaew.0.2"><div class="layout-article__comments" data-reactid=".1sdw0d9oaew.0.2.0"><div class="comments" data-reactid=".1sdw0d9oaew.0.2.0.0"><div id="disqus_thread" data-reactid=".1sdw0d9oaew.0.2.0.0.0"><iframe id="dsq-app3027" name="dsq-app3027" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Understanding JavaScript behaviors in Drupal _ Lullabot_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 4432px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div></div></div></div><aside class="layout-article__promos" data-reactid=".1sdw0d9oaew.0.3"><div data-reactid=".1sdw0d9oaew.0.3.$607f4689-36ce-49cb-83c1-3e0e12997868"><div class="promo-newsletter" data-reactid=".1sdw0d9oaew.0.3.$607f4689-36ce-49cb-83c1-3e0e12997868.0"><div class="promo-newsletter__inner" data-reactid=".1sdw0d9oaew.0.3.$607f4689-36ce-49cb-83c1-3e0e12997868.0.0"><div class="promo-newsletter__bot-icon" data-reactid=".1sdw0d9oaew.0.3.$607f4689-36ce-49cb-83c1-3e0e12997868.0.0.0"><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.3.$607f4689-36ce-49cb-83c1-3e0e12997868.0.0.0.0"><svg class="icon icon--newsletter-bot" role="img" title="Newsletter bot" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="#icon-newsletter-bot"></use></svg></span></div><div class="promo-newsletter__text" data-reactid=".1sdw0d9oaew.0.3.$607f4689-36ce-49cb-83c1-3e0e12997868.0.0.1"><strong data-reactid=".1sdw0d9oaew.0.3.$607f4689-36ce-49cb-83c1-3e0e12997868.0.0.1.0">Subscribe to the Lullabot Newsletter</strong><span data-reactid=".1sdw0d9oaew.0.3.$607f4689-36ce-49cb-83c1-3e0e12997868.0.0.1.1"> and get our latest articles and more direct to your inbox</span></div><div class="promo-newsletter__cta-wrapper" data-reactid=".1sdw0d9oaew.0.3.$607f4689-36ce-49cb-83c1-3e0e12997868.0.0.2"><a class="promo-newsletter__button u-form-button" href="http://eepurl.com/bQzt" data-reactid=".1sdw0d9oaew.0.3.$607f4689-36ce-49cb-83c1-3e0e12997868.0.0.2.0">Sign Up</a></div></div></div></div><div data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783"><div class="promo-become-bot-your-project" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0"><div class="u-layout-container" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0"><div class="promo-become-bot-your-project__inner u-layout-content-grid-wide" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0"><div class="promo-become-bot-your-project__item" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.0"><h3 class="promo-become-bot-your-project__title" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.0.0">We can partner with you!</h3><p data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.0.1">We've accomplished some amazing things for some really great clients. We'd love to talk about how we can help your next project!</p><span class="promo-become-bot-your-project__cta" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.0.2"><a class="link link--cta-button" href="https://www.lullabot.com/contact#your-project" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.0.2.0"><span data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.0.2.0.0">Tell us about your project</span><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.0.2.0.1"><svg class="icon icon--arrow-right" role="img" title="Let&#39;s talk" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/interactive.8b7552efc9d5.svg#icon-arrow-right"></use></svg></span></a></span></div><div class="promo-become-bot-your-project__item" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.1"><h3 class="promo-become-bot-your-project__title" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.1.0">You can be a 'bot!</h3><p data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.1.1">We have an amazing team of friendly experts in a number of disciplines. We work hard, have lots of fun together, and take great care of our team.</p><span class="promo-become-bot-your-project__cta" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.1.2"><a class="link link--cta-button" href="https://www.lullabot.com/jobs" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.1.2.0"><span data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.1.2.0.0">See our open positions</span><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.0.3.$d90a4a74-9256-4968-92d5-cdda3a4eb783.0.0.0.1.2.0.1"><svg class="icon icon--arrow-right" role="img" title="Become a bot" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/interactive.8b7552efc9d5.svg#icon-arrow-right"></use></svg></span></a></span></div></div></div></div></div><div data-reactid=".1sdw0d9oaew.0.3.$9294cb37-0fd5-4bb3-b76e-fa0eccf6da2a"></div></aside></div><aside class="layout-article__reveal-promos" data-reactid=".1sdw0d9oaew.1"><div data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45"><div class="promo-random" data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45.0"><span data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45.0.0"><aside class="promo-syfy u-layout-full" data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45.0.0.0"><div class="promo-syfy__inner" data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45.0.0.0.0"><div class="promo-syfy__text" data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45.0.0.0.0.0"><h3 class="promo-syfy__title" data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45.0.0.0.0.0.0"><span data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45.0.0.0.0.0.0.0">Implementing an out of this world responsive design for </span><a class="link link--cta" href="https://www.lullabot.com/our-work/syfy" data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45.0.0.0.0.0.0.1"><span data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45.0.0.0.0.0.0.1.0">Syfy </span><span class="icon__wrapper" data-reactid=".1sdw0d9oaew.1.$7f19d7fd-2b25-4cd0-aa90-e3830b348b45.0.0.0.0.0.0.1.1"><svg class="icon icon--arrow-right" role="img" title="The Syfy case study" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="/build/rev/sprites/interactive.8b7552efc9d5.svg#icon-arrow-right"></use></svg></span></a></h3></div></div></aside></span></div></div></aside></div></div> <svg xmlns="http://www.w3.org/2000/svg" width="0" height="0"><symbol viewBox="-263 392.9 68 57" id="icon-newsletter-bot"><title>newsletter-bot</title><g class="flag" transform="rotate(-90 -236.96 402.7)"><path d="M-237 402.7v-8.8c0-.5-.4-.9-.9-.9h-5.8c-.5 0-.9.4-.9.9v3.7c0 .5.4.9.9.9h4.9v5.1c0 .3.1.5.3.7" fill="#185E86"></path><path d="M-242.7 394.6h4v2h-4v-2z" fill="#E1472A"></path></g><path d="M-229.3 435h12.6c3.8 0 6.9 3.1 6.9 6.9s-3.1 6.9-6.9 6.9h-12.6" fill="#4AA4DB"></path><g fill="#185E86"><circle cx="-229.3" cy="441.9" r="6.9"></circle><path d="M-229.3 449.6c-4.3 0-7.8-3.5-7.8-7.8s3.5-7.8 7.8-7.8 7.8 3.5 7.8 7.8c0 4.4-3.5 7.8-7.8 7.8zm0-13.8c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6c.1-3.2-2.6-6-6-6z"></path></g><path d="M-232.1 409.3c0-3.2-2.6-5.8-5.8-5.8s-5.8 2.6-5.8 5.8v10.3h11.5l.1-10.3z" fill="#185E86"></path><path d="M-232.1 420.4h-11.5c-.5 0-.9-.4-.9-.9v-10.2c0-3.7 3-6.6 6.6-6.6s6.6 3 6.6 6.6v10.3c.1.4-.3.8-.8.8zm-10.7-1.8h9.8v-9.3c0-2.7-2.2-4.9-4.9-4.9s-4.9 2.2-4.9 4.9v9.3z" fill="#185E86"></path><path d="M-249.4 405.3h14.1v9.4h-14.1v-9.4z" fill="#1E83C0"></path><path d="M-235.3 415.6h-14.1c-.5 0-.9-.4-.9-.9v-9.4c0-.5.4-.9.9-.9h14.1c.5 0 .9.4.9.9v9.4c0 .5-.4.9-.9.9zm-13.2-1.8h12.4v-7.7h-12.4v7.7zm4.9 5.8h11.5V435h-11.5v-15.4z" fill="#185E86"></path><path d="M-213.9 419.6h-18.2V435h-8v13.8h12.6c3.8 0 6.9-3.1 6.9-6.9s-3.1-6.9-6.9-6.9h13.6v-15.4z" fill="#4AA4DB"></path><path d="M-228.1 425h10.3v4.6h-10.3V425z" fill="#CBEAFA"></path><g class="envelope" transform="translate(15, 0)"><path d="M-232.4 408.6h-13.8v9.4h13.8" fill="#FFF"></path><path d="M-231.3 418.3c.1-.1-.9-.3-.9-.4l.9-.1v-9c.1-.3-1-.6-1.2-.8s.5-.3.3-.3h-14.1l-.1.1c-.1 0-.1.1-.1.1s0 .1-.1.1c0 .1-.1.1-.1.2v9.7c0 .5.4.9.9.9h13.7c.4 0 .6-.2.8-.5zm-3.3-8.9l-4.6 3.9-4.6-3.9h9.2zm-10.7 1l5.5 4.7c.2.1.4.2.6.2s.4-.1.6-.2l5.6-4.7v6.7h-12.3v-6.7z" fill="#185E86"></path></g><path d="M-242.6 423.1h2.4v11h-2.4v-11z" fill="#49A5DB"></path><g fill="#185E86"><path d="M-217.9 424.1h-10.2c-.5 0-.9.4-.9.9v4.6c0 .5.4.9.9.9h10.2c.5 0 .9-.4.9-.9V425c0-.5-.4-.9-.9-.9zm-.8 4.6h-8.6v-2.9h8.5l.1 2.9z"></path><path d="M-238.5 404.3c.2.1.4.2.6.2h18.2c2.7 0 4.9 2.2 4.9 4.9v9.4h-28.9c-.5 0-.9.4-.9.9v2.6h-2.7c-5.9 0-10.8-4.8-10.8-10.8v-8.9c1.7-.4 2.9-1.9 2.9-3.7 0-.5-.4-.9-.9-.9s-.9.4-.9.9c0 1.1-.9 2.1-2.1 2.1-1.1 0-2.1-.9-2.1-2.1 0-.5-.4-.9-.9-.9s-.9.4-.9.9c0 1.8 1.3 3.3 2.9 3.7v8.9c0 6.9 5.6 12.5 12.5 12.5h2.7v11.1c0 .1 0 .3.1.4-2.1 1.4-3.5 3.8-3.5 6.5 0 4.3 3.5 7.8 7.8 7.8h23.5c4.3 0 7.8-3.5 7.8-7.8 0-3-1.7-5.5-4.1-6.8V424h2.7c6.9 0 12.5-5.6 12.5-12.5v-8.9c1.7-.4 2.9-1.9 2.9-3.7.3-.5 0-.9-.5-.9s-.9.4-.9.9c0 1.1-.9 2.1-2.1 2.1s-2.1-.9-2.1-2.1c0-.5-.4-.9-.9-.9s-.9.4-.9.9c0 1.8 1.3 3.3 2.9 3.7v8.9c0 5.9-4.8 10.8-10.8 10.8h-2.7v-13c0-3.7-3-6.6-6.6-6.6H-237m-1.8.9c0 .3.1.5.3.7m9.2 31.5h1.7c1.6 0 3.1.7 4.2 1.7h-10.3c-.4-.7-1-1.2-1.6-1.7h6zm16.8 1.8h-8.6c-.4-.7-1-1.2-1.6-1.7h6c1.7-.1 3.2.6 4.2 1.7zm1.2 7h-9c.2-.6.4-1.2.5-1.9h9.1c-.1.7-.3 1.3-.6 1.9zm-8.5-3.6c-.1-.6-.2-1.2-.4-1.7h9c.2.5.4 1.1.5 1.7h-9.1zm-12.6 0c-.1-.6-.2-1.2-.4-1.7h10.7c.2.5.4 1.1.5 1.7h-10.8zm10.8 1.7c-.1.7-.3 1.3-.6 1.9h-10.7c.2-.6.4-1.2.5-1.9h10.8zm-21.2-8.6v-10.2h6.2c.5 0 .9-.4.9-.9s-.4-.9-.9-.9h-6.2v-1.7h9.8v13.7h-9.8zm13.5 13.8h-6c.6-.5 1.1-1 1.5-1.6h10.3c-1.1 1-2.5 1.6-4 1.6h-1.8zm6.6 0c.6-.5 1.1-1 1.5-1.6h8.6c-1.1 1-2.5 1.6-4 1.6h-6.1zm-4.8-13.8h-3.7v-13.7h16.5v13.7h-12.8z"></path></g><path d="M-240.2 446.7c-2.7 0-4.8-2.1-4.8-4.8s2.1-4.8 4.8-4.8" fill="#49A5DB"></path><path d="M-232.1 420.4c-.5 0-.9-.4-.9-.9v-10.2c0-2.7-2.2-4.9-4.9-4.9-.5 0-.9-.4-.9-.9s.4.1.9.1c3.7 0 6.6 2 6.6 5.6v10.3c.1.5-.3.9-.8.9z" fill="#185E86"></path><path d="M-231.3 409.2v9.6h16.5v-9.4c0-2.7-2.2-4.9-4.9-4.9h-13.6c1.2 1.2 2 2.9 2 4.7z" fill="#CBEAFA"></path><path d="M-226.5 411c-.9 0-1.6-.7-1.6-1.6s.7-1.6 1.6-1.6c.9 0 1.6.7 1.6 1.6s-.8 1.6-1.6 1.6zm7-3.2c-.9 0-1.6.7-1.6 1.6s.7 1.6 1.6 1.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6zm-3.3 8.7c2 0 3.7-1.7 3.7-3.7h-7.4c0 2 1.6 3.7 3.7 3.7zm-15.7-12.2c.2.1.4.2.6.2h18.2" fill="#185E86"></path></symbol></svg> <script>document.createElement("picture");</script> <script>(function(){'use strict';function f(a){function b(){document.body?a():setTimeout(b,0)}b()};function h(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.g=document.createElement("span");this.f=-1;this.b.style.cssText="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;";this.c.style.cssText="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;";
this.g.style.cssText="display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;";this.h.style.cssText="display:inline-block;width:200%;height:200%;";this.b.appendChild(this.h);this.c.appendChild(this.g);this.a.appendChild(this.b);this.a.appendChild(this.c)}function p(a,b,c){a.a.style.cssText="min-width:20px;min-height:20px;display:inline-block;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font-size:100px;font-family:"+b+";"+c}
function u(a){var b=a.a.offsetWidth,c=b+100;a.g.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.f!==b?(a.f=b,!0):!1}function v(a,b){a.b.addEventListener("scroll",function(){u(a)&&null!==a.a.parentNode&&b(a.f)},!1);a.c.addEventListener("scroll",function(){u(a)&&null!==a.a.parentNode&&b(a.f)},!1);u(a)};var A=[];function B(a){A.push(a);1===A.length&&C()}function D(){for(;A.length;)A[0](),A.shift()}if(window.MutationObserver){var E=document.createElement("div");(new MutationObserver(D)).observe(E,{attributes:!0});var C=function(){E.setAttribute("x",0)}}else C=function(){setTimeout(D)};function F(a){this.a=G;this.b=void 0;this.c=[];var b=this;try{a(function(a){b.resolve(a)},function(a){b.reject(a)})}catch(c){b.reject(c)}}var G=2;function H(a){return new F(function(b,c){c(a)})}function I(a){return new F(function(b){b(a)})}
F.prototype.resolve=function(a){var b=this;if(b.a===G){if(a===b)throw new TypeError("Promise settled with itself.");var c=!1;try{var e=a&&a.then;if(null!==a&&"object"===typeof a&&"function"===typeof e){e.call(a,function(a){c||b.resolve(a);c=!0},function(a){c||b.reject(a);c=!0});return}}catch(d){c||b.reject(d);return}b.a=0;b.b=a;J(b)}};F.prototype.reject=function(a){if(this.a===G){if(a===this)throw new TypeError("Promise settled with itself.");this.a=1;this.b=a;J(this)}};
function J(a){B(function(){if(a.a!==G)for(;a.c.length;){var b=a.c.shift(),c=b[0],e=b[1],d=b[2],b=b[3];try{0===a.a?"function"===typeof c?d(c.call(void 0,a.b)):d(a.b):1===a.a&&("function"===typeof e?d(e.call(void 0,a.b)):b(a.b))}catch(g){b(g)}}})}F.prototype.catch=function(a){return this.then(void 0,a)};F.prototype.then=function(a,b){var c=this;return new F(function(e,d){c.c.push([a,b,e,d]);J(c)})};
function K(a){return new F(function(b,c){function e(c){return function(e){g[c]=e;d+=1;d===a.length&&b(g)}}var d=0,g=[];0===a.length&&b(g);for(var k=0;k<a.length;k+=1)a[k].then(e(k),c)})}function L(a){return new F(function(b,c){for(var e=0;e<a.length;e+=1)a[e].then(b,c)})}
if(window.Promise){var M=window.Promise;M.prototype.then=window.Promise.prototype.then;M.prototype.catch=window.Promise.prototype["catch"];M.all=window.Promise.all;M.race=window.Promise.race;M.resolve=window.Promise.resolve;M.reject=window.Promise.reject}else M=F,M.prototype.then=F.prototype.then,M.prototype.catch=F.prototype.catch,M.all=K,M.race=L,M.resolve=I,M.reject=H;function N(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.variant=c.variant||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"stretch";this.featureSettings=c.featureSettings||"normal"}var O=null;
N.prototype.a=function(a,b){var c=a||"BESbswy",e=b||3E3,d="font-style:"+this.style+";font-variant:"+this.variant+";font-weight:"+this.weight+";font-stretch:"+this.stretch+";font-feature-settings:"+this.featureSettings+";-moz-font-feature-settings:"+this.featureSettings+";-webkit-font-feature-settings:"+this.featureSettings+";",g=document.createElement("div"),k=new h(c),q=new h(c),r=new h(c),l=-1,m=-1,n=-1,w=-1,x=-1,y=-1,t=this;return new M(function(a,b){function c(){null!==g.parentNode&&g.parentNode.removeChild(g)}
function z(){if(-1!==l&&-1!==m||-1!==l&&-1!==n||-1!==m&&-1!==n)if(l===m||l===n||m===n){if(null===O){var b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);O=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))}O?l===w&&m===w&&n===w||l===x&&m===x&&n===x||l===y&&m===y&&n===y||(c(),a(t)):(c(),a(t))}}f(function(){function a(){if(Date.now()-P>=e)c(),b(t);else{var d=document.hidden;if(!0===d||void 0===d)l=k.a.offsetWidth,m=q.a.offsetWidth,n=r.a.offsetWidth,
z();setTimeout(a,50)}}var P=Date.now();p(k,"sans-serif",d);p(q,"serif",d);p(r,"monospace",d);g.appendChild(k.a);g.appendChild(q.a);g.appendChild(r.a);document.body.appendChild(g);w=k.a.offsetWidth;x=q.a.offsetWidth;y=r.a.offsetWidth;a();v(k,function(a){l=a;z()});p(k,t.family+",sans-serif",d);v(q,function(a){m=a;z()});p(q,t.family+",serif",d);v(r,function(a){n=a;z()});p(r,t.family+",monospace",d)})})};window.FontFaceObserver=N;window.FontFaceObserver.prototype.check=N.prototype.a;}());
var fontObserver = {
  observers: [
    {'family': 'FreightTextPro', 'weight': 400},
    {'family': 'FreightSansPro', 'weight': 400, 'style': 'italic'},
    {'family': 'FreightTextPro', 'weight': 700},
    {'family': 'FreightTextPro', 'weight': 300},
    {'family': 'FreightTextPro', 'weight': 300, 'style': 'italic'},
    {'family': 'FreightTextPro', 'weight': 400},
    {'family': 'FreightSansPro', 'weight': 700}
  ],
  semaphore: 0,
  observe: function() {
    var _this = this;
    this.observers.map(function(observer) {
      var fontFaceObserver = new FontFaceObserver(observer.family, {
        weight: observer.weight
      });
      fontFaceObserver.check().then(function() {
        _this.semaphore++;
        if (_this.semaphore === _this.observers.length) {
          if (document.body.classList) {
            document.body.classList.add('body--fonts-loaded');
          }
          else {
            document.body.className += ' body--fonts-loaded';
          }
          document.cookie = 'fontsLoaded=true';
        }
      });
    });
  }
};
fontObserver.observe();
</script> <script src="./Understanding JavaScript behaviors in Drupal _ Lullabot_files/picturefill.min.d3325bc1d59d.js" async=""></script><script src="./Understanding JavaScript behaviors in Drupal _ Lullabot_files/svg4everybody.min.41c890046ffe.js" async=""></script><!--[if IE 9]>
      <script src="/build/rev/bower/placeholders.min.d07c9c7babb3.js"></script>
    <![endif]--> <script src="./Understanding JavaScript behaviors in Drupal _ Lullabot_files/bundle.min.31fa9d761283.js" async=""></script> <script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-1261484-1","auto"),ga("send","pageview");</script><iframe style="display: none;" src="./Understanding JavaScript behaviors in Drupal _ Lullabot_files/saved_resource(1).html"></iframe></body></html>