(function($,Drupal){'use strict';Drupal.behaviors.webformManagedFileAutoUpload={attach:function attach(context){$(context).find('form').once('webform-auto-file-upload').on('submit',function(event){var $form=$(this);if($form.data('webform-auto-file-uploads')>0&&blockSubmit($form)){event.preventDefault();return false;}
return true;});if(typeof Drupal.Ajax!=='undefined'&&typeof Drupal.Ajax.prototype.beforeSubmitWebformManagedFileAutoUploadOriginal==='undefined'){Drupal.Ajax.prototype.beforeSubmitWebformManagedFileAutoUploadOriginal=Drupal.Ajax.prototype.beforeSubmit;Drupal.Ajax.prototype.beforeSubmit=function(form_values,element_settings,options){var $form=this.$form;var $element=$(this.element);var isFormActions=$element.closest('.form-actions').length;var isMultipleUpload=$element.parents('.js-form-type-webform-multiple, .js-form-type-webform-custom-composite').find('.js-form-managed-file').length;var isManagedUploadButton=$element.parents('.js-form-managed-file').length;if($form.data('webform-auto-file-uploads')>0&&(isFormActions||(isMultipleUpload&&!isManagedUploadButton))&&blockSubmit($form)){this.ajaxing=false;return false;}
return this.beforeSubmitWebformManagedFileAutoUploadOriginal();};}
$(context).find('input[type="file"]').once('webform-auto-file-upload').on('change',function(){$(this).data('msk-auto-file-upload',true);var $form=$(this.form);var fileUploads=($form.data('webform-auto-file-uploads')||0);$form.data('webform-auto-file-uploads',fileUploads+1);});},detach:function detach(context,settings,trigger){if(trigger==='unload'){$(context).find('input[type="file"]').removeOnce('webform-auto-file-upload').each(function(){if($(this).data('msk-auto-file-upload')){$(this).removeData('msk-auto-file-upload');var $form=$(this.form);var fileUploads=($form.data('webform-auto-file-uploads')||0);$form.data('webform-auto-file-uploads',fileUploads-1);}});}}};function blockSubmit(form){if($(form).data('webform-auto-file-uploads')<0){return false;}
var message=Drupal.t('File upload inprogress. Uploaded file may be lost.')+
'\n'+
Drupal.t('Do you want to continue?');return!window.confirm(message);}})(jQuery,Drupal);