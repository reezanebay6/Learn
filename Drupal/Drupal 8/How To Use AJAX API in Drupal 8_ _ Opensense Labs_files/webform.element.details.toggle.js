(function($,Drupal){'use strict';Drupal.webform=Drupal.webform||{};Drupal.webform.detailsToggle=Drupal.webform.detailsToggle||{};Drupal.webform.detailsToggle.options=Drupal.webform.detailsToggle.options||{};Drupal.behaviors.webformDetailsToggle={attach:function(context){$('.js-webform-details-toggle',context).once('webform-details-toggle').each(function(){var $form=$(this);var $tabs=$form.find('.webform-tabs');var selector=($tabs.length)?'.webform-tab':'.js-webform-details-toggle';var $details=$form.find('details').filter(function(){var $parents=$(this).parentsUntil(selector);return($parents.find('details').length===0);});if($details.length<2){return;}
var options=$.extend({button:'<button type="button" class="webform-details-toggle-state"></button>'},Drupal.webform.detailsToggle.options);var $toggle=$(options.button).attr('title',Drupal.t('Toggle details widget state.')).on('click',function(e){var open;if(isFormDetailsOpen($form)){$form.find('details').removeAttr('open');open=0;}
else{$form.find('details').attr('open','open');open=1;}
setDetailsToggleLabel($form);if(Drupal.webformDetailsSaveGetName){$form.find('details').each(function(){var name=Drupal.webformDetailsSaveGetName($(this));if(name){localStorage.setItem(name,open);}});}}).wrap('<div class="webform-details-toggle-state-wrapper"></div>').parent();if($tabs.length){$tabs.find('.item-list:first-child').eq(0).before($toggle);}
else{$details.eq(0).before($toggle);}
setDetailsToggleLabel($form);});}};function isFormDetailsOpen($form){return($form.find('details[open]').length===$form.find('details').length);}
function setDetailsToggleLabel($form){var isOpen=isFormDetailsOpen($form);var label=(isOpen)?Drupal.t('Collapse all'):Drupal.t('Expand all');$form.find('.webform-details-toggle-state').html(label);var text=(isOpen)?Drupal.t('All details have been expanded.'):Drupal.t('All details have been collapsed.');Drupal.announce(text);}})(jQuery,Drupal);