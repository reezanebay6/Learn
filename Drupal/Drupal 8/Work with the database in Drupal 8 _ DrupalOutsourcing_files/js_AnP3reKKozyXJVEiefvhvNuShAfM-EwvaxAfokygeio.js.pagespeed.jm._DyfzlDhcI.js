(function($,Drupal,window,document,undefined){Drupal.behaviors.msmessage={attach:function(context,settings){$('.messages').prepend('<div class="message-close-button" title="'+Drupal.t('close')+'">Ã—</div>');$('.message-close-button').click(function(){$(this).parent('.messages').slideUp(500);});}};})(jQuery,Drupal,this,this.document);;(function($){Drupal.behaviors.scroll_to_top={attach:function(context,settings){var exist=jQuery('#back-top').length;if(exist==0){$("body").append("<p id='back-top'><a href='#top'><span id='button'></span><span id='link'>"+settings.scroll_to_top.label+"</span></a></p>");}$("input").change(function(){var style="<style>#scroll-to-top-prev-container #back-top-prev span#button-prev{ background-color:"+$("#edit-scroll-to-top-bg-color-out").val()+";} #scroll-to-top-prev-container #back-top-prev span#button-prev:hover{ background-color:"+$("#edit-scroll-to-top-bg-color-hover").val()+" }</style>"
var html="<p id='back-top-prev' style='position:relative;'><a href='#top'><span id='button-prev'></span><span id='link'>";if($("#edit-scroll-to-top-display-text").attr('checked')){html+=$("#edit-scroll-to-top-label").val();}html+="</span></a></p>";$("#scroll-to-top-prev-container").html(style+html);});$("#back-top").hide();$(function(){$(window).scroll(function(){if($(this).scrollTop()>100){$('#back-top').fadeIn();}else{$('#back-top').fadeOut();}});$('#back-top a').click(function(){$('body,html').animate({scrollTop:0},800);return false;});});}};})(jQuery);;(function($){Drupal.progressBar=function(id,updateCallback,method,errorCallback){var pb=this;this.id=id;this.method=method||'GET';this.updateCallback=updateCallback;this.errorCallback=errorCallback;this.element=$('<div class="progress" aria-live="polite"></div>').attr('id',id);this.element.html('<div class="bar"><div class="filled"></div></div>'+'<div class="percentage"></div>'+'<div class="message">&nbsp;</div>');};Drupal.progressBar.prototype.setProgress=function(percentage,message){if(percentage>=0&&percentage<=100){$('div.filled',this.element).css('width',percentage+'%');$('div.percentage',this.element).html(percentage+'%');}$('div.message',this.element).html(message);if(this.updateCallback){this.updateCallback(percentage,message,this);}};Drupal.progressBar.prototype.startMonitoring=function(uri,delay){this.delay=delay;this.uri=uri;this.sendPing();};Drupal.progressBar.prototype.stopMonitoring=function(){clearTimeout(this.timer);this.uri=null;};Drupal.progressBar.prototype.sendPing=function(){if(this.timer){clearTimeout(this.timer);}if(this.uri){var pb=this;$.ajax({type:this.method,url:this.uri,data:'',dataType:'json',success:function(progress){if(progress.status==0){pb.displayError(progress.data);return;}pb.setProgress(progress.percentage,progress.message);pb.timer=setTimeout(function(){pb.sendPing();},pb.delay);},error:function(xmlhttp){pb.displayError(Drupal.ajaxError(xmlhttp,pb.uri));}});}};Drupal.progressBar.prototype.displayError=function(string){var error=$('<div class="messages error"></div>').html(string);$(this.element).before(error).hide();if(this.errorCallback){this.errorCallback(this);}};})(jQuery);;(function($){Drupal.behaviors.fileValidateAutoAttach={attach:function(context,settings){if(settings.file&&settings.file.elements){$.each(settings.file.elements,function(selector){var extensions=settings.file.elements[selector];$(selector,context).bind('change',{extensions:extensions},Drupal.file.validateExtension);});}},detach:function(context,settings){if(settings.file&&settings.file.elements){$.each(settings.file.elements,function(selector){$(selector,context).unbind('change',Drupal.file.validateExtension);});}}};Drupal.behaviors.fileButtons={attach:function(context){$('input.form-submit',context).bind('mousedown',Drupal.file.disableFields);$('div.form-managed-file input.form-submit',context).bind('mousedown',Drupal.file.progressBar);},detach:function(context){$('input.form-submit',context).unbind('mousedown',Drupal.file.disableFields);$('div.form-managed-file input.form-submit',context).unbind('mousedown',Drupal.file.progressBar);}};Drupal.behaviors.filePreviewLinks={attach:function(context){$('div.form-managed-file .file a, .file-widget .file a',context).bind('click',Drupal.file.openInNewWindow);},detach:function(context){$('div.form-managed-file .file a, .file-widget .file a',context).unbind('click',Drupal.file.openInNewWindow);}};Drupal.file=Drupal.file||{validateExtension:function(event){$('.file-upload-js-error').remove();var extensionPattern=event.data.extensions.replace(/,\s*/g,'|');if(extensionPattern.length>1&&this.value.length>0){var acceptableMatch=new RegExp('\\.('+extensionPattern+')$','gi');if(!acceptableMatch.test(this.value)){var error=Drupal.t("The selected file %filename cannot be uploaded. Only files with the following extensions are allowed: %extensions.",{'%filename':this.value.replace('C:\\fakepath\\',''),'%extensions':extensionPattern.replace(/\|/g,', ')});$(this).closest('div.form-managed-file').prepend('<div class="messages error file-upload-js-error" aria-live="polite">'+error+'</div>');this.value='';return false;}}},disableFields:function(event){var clickedButton=this;if(!$(clickedButton).hasClass('ajax-processed')){return;}var $enabledFields=[];if($(this).closest('div.form-managed-file').length>0){$enabledFields=$(this).closest('div.form-managed-file').find('input.form-file');}var $fieldsToTemporarilyDisable=$('div.form-managed-file input.form-file').not($enabledFields).not(':disabled');$fieldsToTemporarilyDisable.attr('disabled','disabled');setTimeout(function(){$fieldsToTemporarilyDisable.attr('disabled',false);},1000);},progressBar:function(event){var clickedButton=this;var $progressId=$(clickedButton).closest('div.form-managed-file').find('input.file-progress');if($progressId.length){var originalName=$progressId.attr('name');$progressId.attr('name',originalName.match(/APC_UPLOAD_PROGRESS|UPLOAD_IDENTIFIER/)[0]);setTimeout(function(){$progressId.attr('name',originalName);},1000);}setTimeout(function(){$(clickedButton).closest('div.form-managed-file').find('div.ajax-progress-bar').slideDown();},500);},openInNewWindow:function(event){$(this).attr('target','_blank');window.open(this.href,'filePreview','toolbar=0,scrollbars=1,location=1,statusbar=1,menubar=0,resizable=1,width=500,height=550');return false;}};})(jQuery);;(function($){Drupal.behaviors.textarea={attach:function(context,settings){$('.form-textarea-wrapper.resizable',context).once('textarea',function(){var staticOffset=null;var textarea=$(this).addClass('resizable-textarea').find('textarea');var grippie=$('<div class="grippie"></div>').mousedown(startDrag);grippie.insertAfter(textarea);function startDrag(e){staticOffset=textarea.height()-e.pageY;textarea.css('opacity',0.25);$(document).mousemove(performDrag).mouseup(endDrag);return false;}function performDrag(e){textarea.height(Math.max(32,staticOffset+e.pageY)+'px');return false;}function endDrag(e){$(document).unbind('mousemove',performDrag).unbind('mouseup',endDrag);textarea.css('opacity',1);}});}};})(jQuery);;(function($){Drupal.behaviors.webform=Drupal.behaviors.webform||{};Drupal.behaviors.webform.attach=function(context){Drupal.webform.datepicker(context);};Drupal.webform=Drupal.webform||{};Drupal.webform.datepicker=function(context){$('div.webform-datepicker').each(function(){var $webformDatepicker=$(this);var $calendar=$webformDatepicker.find('input.webform-calendar');if($calendar.length==0){return;}var startDate=$calendar[0].className.replace(/.*webform-calendar-start-(\d{4}-\d{2}-\d{2}).*/,'$1').split('-');var endDate=$calendar[0].className.replace(/.*webform-calendar-end-(\d{4}-\d{2}-\d{2}).*/,'$1').split('-');var firstDay=$calendar[0].className.replace(/.*webform-calendar-day-(\d).*/,'$1');startDate=new Date(startDate[0],startDate[1]-1,startDate[2]);endDate=new Date(endDate[0],endDate[1]-1,endDate[2]);if(startDate>endDate){var laterDate=startDate;startDate=endDate;endDate=laterDate;}var startYear=startDate.getFullYear();var endYear=endDate.getFullYear();$calendar.datepicker({dateFormat:'yy-mm-dd',yearRange:startYear+':'+endYear,firstDay:parseInt(firstDay),minDate:startDate,maxDate:endDate,onSelect:function(dateText,inst){var date=dateText.split('-');$webformDatepicker.find('select.year, input.year').val(+date[0]).trigger('change');$webformDatepicker.find('select.month').val(+date[1]).trigger('change');$webformDatepicker.find('select.day').val(+date[2]).trigger('change');},beforeShow:function(input,inst){var year=$webformDatepicker.find('select.year, input.year').val();var month=$webformDatepicker.find('select.month').val();var day=$webformDatepicker.find('select.day').val();var today=new Date();year=year?year:today.getFullYear();month=month?month:today.getMonth()+1;day=day?day:today.getDate();year=(year<startYear||year>endYear)?startYear:year;$(input).val(year+'-'+month+'-'+day);}});$calendar.click(function(event){$(this).focus();event.preventDefault();});});}})(jQuery);;